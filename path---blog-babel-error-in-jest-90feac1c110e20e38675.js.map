{"version":3,"sources":["webpack:///path---blog-babel-error-in-jest-90feac1c110e20e38675.js","webpack:///./.cache/json/blog-babel-error-in-jest.json"],"names":["webpackJsonp","441","module","exports","data","markdownRemark","html","frontmatter","title","date","draft","pathContext","slug","_PARENT"],"mappings":"AAAAA,cAAc,gBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA;AAA0s4BC,aAAqoJC,MAAA,6CAAAC,KAAA,mBAAAC,MAAA,QAA8FC,aAAgBC,KAAA,sBAAAC,QAAA","file":"path---blog-babel-error-in-jest-90feac1c110e20e38675.js","sourcesContent":["webpackJsonp([1478269245095],{\n\n/***/ 441:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Not so long ago, I decided to add some tests to a small program I wrote. I chose to use <a href=\\\"https://facebook.github.io/jest/\\\">jest</a>, a nice testing platform by facebook that I've enjoyed using in the past. This time, however, I had some trouble: I ran into a babel-related error with my very first test. I'd like to be a world-class debugger someday, so I figured I'd dig in and really try to understand the error.</p>\\n<p>This post describes how to set up a little app that reproduces the error, and next, how to debug the error using tools from the modern JavaScript toolbox.</p>\\n<h2>Reproducing the Error</h2>\\n<p>(If you'd like, you can skip this section and reproduce the error by cloning this <a href=\\\"https://github.com/nwshane/jest-babel-error\\\">repository</a>.)</p>\\n<p>In order to get jest to show us this babel-related error, we'll do the following things:</p>\\n<ol>\\n<li>Write a sum function that we will test.</li>\\n<li>Write a simple jest test for the sum function.</li>\\n<li>Create an npm <code>test</code> script to run our tests.</li>\\n<li>Install jest.</li>\\n<li>Configure babel to recognize ES2015 imports.</li>\\n</ol>\\n<p>Let's start out by creating that sum function.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n</code></pre>\\n      </div>\\n<p>Simple enough. Now we want to test our sum function, because we're responsible devs, and that's what responsible devs do.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n</code></pre>\\n      </div>\\n<p>(If you saw the bug in this code, then good for you! If not, then that's fine—I didn't see it either, so I had to learn how to debug it.)</p>\\n<p>Two more steps until we can run our tests. First, we'll create a <code>package.json</code> file containing our <code>test</code> script, which will run jest. Run <code>npm init</code>, and answer the <code>test command</code> prompt with <code>jest</code> (you can use the defaults for everything else).</p>\\n<p>Finally, we install jest with <code>npm i jest</code>.</p>\\n<p>Hurray! We now run the test script with <code>npm t</code> (a shortcut for <code>npm test</code>, or <code>npm run test</code>), and we see...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>Test suite failed to run\\n\\nSyntaxError: Unexpected token import</code></pre>\\n      </div>\\n<p>Dang! It looks like jest doesn't understand the <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\\\">ES2015 import</a> syntax. That's okay, we just need to install <a href=\\\"https://babeljs.io/\\\">babel</a> and the <a href=\\\"https://babeljs.io/docs/plugins/preset-es2015/\\\">ES2015 babel preset</a>, which jest will use to transform the import syntax into something it understands.</p>\\n<p>Jest's documentation on <a href=\\\"https://facebook.github.io/jest/docs/en/getting-started.html#using-babel\\\">configuring babel</a> is a bit complicated with a number of side notes. Long story short, jest comes with a library called <a href=\\\"https://github.com/facebook/jest/tree/master/packages/babel-jest\\\">babel-jest</a>, so all we have to do to make jest understand our <code>import</code> syntax is the following:</p>\\n<ol>\\n<li>Add a <code>.babelrc</code> file to our project:</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"presets\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"es2015\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li>Install the ES2015 preset: <code>npm i babel-preset-es2015</code></li>\\n</ol>\\n<p>With that done, babel should be good to go.</p>\\n<h2>Debugging our Babel-Related Error</h2>\\n<p>Running our tests again (<code>npm t</code>), we get a more cryptic error this time:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p>Hey, at least our test suite is running now!</p>\\n<p>If you don't have a lot of experience with babel, then this error will seem a bit strange. Where in the world did <code>_index2.default</code> come from? Who cares if it's not a function—I didn't write anything like that in my code!</p>\\n<p>Hold on a moment. Let's try to remember what babel is doing. Babel is a transpiler, so it's transforming your code into something that jest can understand. Does that mean it might be transforming variable names as well, and outputting things like <code>_index2.default</code>?</p>\\n<p>In order to answer that question, let's consult a handy section of the jest docs, aptly named, \\\"<a href=\\\"https://facebook.github.io/jest/docs/en/troubleshooting.html#tests-are-failing-and-you-don-t-know-why\\\">Tests are Failing and You Don't Know Why</a>\\\". The docs recommend we use a debugger, which seems like a great idea for getting more info!</p>\\n<p>Let's add a <code>debugger</code> line into our code, to tell our debugging tool to stop at that line:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">debugger</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n</code></pre>\\n      </div>\\n<p>Next, let's run our tests as recommended by the docs:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>node --inspect-brk node_modules/.bin/jest --runInBand</code></pre>\\n      </div>\\n<p>This gives us the following output:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>Debugger listening on ws://127.0.0.1:9229/cedc923a-cc9f-4531-a947-9c1ef7226bc8\\nFor help see https://nodejs.org/en/docs/inspector</code></pre>\\n      </div>\\n<p>Looking at the above link, we can see a bunch of different options for debugging our code. Let's use Chrome, since most of us will have it installed already.</p>\\n<ol>\\n<li>Navigate to <code>chrome://inspect/</code> in Chrome.</li>\\n<li>In the <code>Remote Target</code> section, you should see the script <code>node_modules/.bin/jest</code>. Click the <code>inspect</code> link below it.</li>\\n</ol>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 376px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 80.58510638297874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQ4y5VUyXLaQBDVr+cHcs85X5GcXIkPYSvAQQJkgdDCJgvtAu0v3UPAYHAq7qqunuoZ9bzX/UZSWZao6wZFUaCqauEnq+saBe2XVYWmac7O9nZ9Msl1XfT7A6hTFTNNo/UQ7s4Tm34QoNVuoz8Yot3toD/8fVX4nkunyheX4DXXfNilJI4gywoURYHn+VcF87LBt2kFZTKGYRjQFwZMitpshqmqUtTgEYtLk/I8RxCESJL4LkI3bbDf769QcG8r6ivHpqnFDM4FORnHMbIsuylYVA26VkXIdBimCd0wYVom5vqcooUFoZ1Mx3Dc3WvBw+EAx3GwFb4VaC5NnkeY2ylGWgSF1k/PEZ6NBFMjphhDsxNoZgx9mWCghkeEDLm5MxXOlVV9pMrniF5T1xf06zNtsSaXWH+bzRpJmt4UzIscYRSB+8zIuW+e51G+ELrNKP/WpIwor9ZrQZs1KahvNwJBTIPq9np4kmXSImmVpmtRD1vdHh5+PorvWBkBTZq/TQmU9K8XUBLCKIqxp0vjJEEQhgKp5/t4zwRCRse+oxfCg3lxXohSSf0qMRpP0Op0YNBUR8qYENqkv/n7BfktR9Snw13ZFHhQv2Np27CXK6xWy6N8SEa2bcGi/IKkFAa+6C3Tl7jRzJ3lc2/KfupD1nz0FQf2lvRK57IwELplEBzFT4SGxOAk/KfVf3sbf/6E9OsXFMpQSOiGMj5oQocV/fIIZd5+RP7rB0pdO+//AfU20R51RfaeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Remote Target\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/c3c45424dfaefd9b73f69e06708a1f97-355f8.png\\\"\\n        srcset=\\\"/static/c3c45424dfaefd9b73f69e06708a1f97-2d9b1.png 163w,\\n/static/c3c45424dfaefd9b73f69e06708a1f97-17d51.png 325w,\\n/static/c3c45424dfaefd9b73f69e06708a1f97-355f8.png 376w\\\"\\n        sizes=\\\"(max-width: 376px) 100vw, 376px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<ol start=\\\"3\\\">\\n<li>Cool! Looks like a debugger! <code>--inspect-brk</code> pauses code execution at the first line of the script, so we've stopped at the first line of the jest script file. To get to our debugger line, let's press the play button.</li>\\n</ol>\\n<p>After a little wait, our <code>spec.js</code> file will open and you'll see our sum test containing the <code>debugger</code> line.</p>\\n<p><code>_index2.default</code> is still no where in sight, but that's because we're looking at the \\\"Source Map\\\" of our code—that is, the original code that we wrote. Chrome shows this to us in a couple places:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 79.39698492462311%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQ4y+2Uy2rDMBBF/f+f0VWhi5JFoR/RRSkNJo5rx684tuTYliXHD9m3Hi1CFyEEmu564cJoJI6G0SCrKAqQq6pCXddomgZSSrOmmHK3mjgWYwxpmiIMQ3DOkec54ihGlmVg2w3E6hHK/kSz/oDYrKGWS5RSF12WJSwhhIHIvcDQdGDshK46YZAdhqpEl6WY5xmkeRwwTxrXZIBJksBxHNi2Df61hXRsVFGIemtDFRzdIV0ukKaKXgn0fX8dGEYJajXj9cXD6tnF2/sBGe+wzxT8iMMLGYJ46ZOczLlrNkDq4fF4RNv2OHUjxpGsofVkYqqI1rfo3MO2bXEPGSC9zr30D/wD4MTz+wI1O2D03d8Baai11mePokL79AC9DPXP/C22qDoa7CAIEEURfN9HHMfYU+x5Ju+6Lna7nYlpn87T13bJ3+wn3Um7PiHuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Source Map\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/977ee10b94867637f15ba3cbb4d13330-f636d.png\\\"\\n        srcset=\\\"/static/977ee10b94867637f15ba3cbb4d13330-1783f.png 163w,\\n/static/977ee10b94867637f15ba3cbb4d13330-7ad53.png 325w,\\n/static/977ee10b94867637f15ba3cbb4d13330-f636d.png 597w\\\"\\n        sizes=\\\"(max-width: 597px) 100vw, 597px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Generally, it's much nicer to look at the Source Map of some code than its transpiled version, which is why Chrome shows it to us. However, we're interested to see whether our transpiled code contains <code>_index2.default</code>, so we need to go beyond the source map.</p>\\n<p>First, let's look in the Scope section of the debugging window. Scope contains all the variables that are accessible where we paused our code with <code>debugger</code>, and notably it shows us variables from our <em>transpiled</em> code, which is what we want to see. Taking a look around, we open up the <code>Closure</code> object, and... there's <code>_index2</code>! Open that up, and we see a <code>sum</code> property, as well as an <code>__esModule</code> property, but no <code>default</code> property.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 88.04878048780488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQ4y6VU2ZKbMBDk/z9pH1KVl00cs3G2NjY2iMMcQlziNiwF7kjaysO++FhPVdcISmqGnh5pnHMErILMjDEkSYKqqhDHscpRFKm1YRhqT13XF6EVRYGXA0cYhnAcRxHIgzKXZYntdgvXdbFarZBl2XXCJNnBPDyBGN8QOD8RuM9Iot/w3R9wzO9YpgiY6c3Q+i5FXTooc4KE7pDGBsrCRpGZ4LmF94FhGm+HJvXZ7/dYv+hwvSPatn0IWhhS2LYtRN9hres4mOZVnS43hX90VDZHii7zQ4SSxPNcbF5fQUSlXdc9BGUbxmJY5IPs0dCmaVJ+K0JBfEwRBgFMy4LvB18jlBVKE3uiw0eBXDzLrts2QZZmIIQI2DBFsyyLgCXpbRWe6h7UjMGcFMMwYF6WTxvneVb5fD5fJ5TBQgZGGOqqFVUUykrSl3mWo+/7+zT8/+X3XlQbNmjiFl3WCxtVoKwBL4f7CXnBcRIHJXo+iN8e4QgdPc8HpfHthPKKyvNCIEeRcvVymRfM0/xJu0sxDCdkgiNNU2hN06jpoGJapMnHcbwbcoblXRqJK1CjlOLt7xtWax2/9DU2mz84+v6XR+8fFDBg9k61GfIAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Debugger Scope\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/8d7fe9904055b6e733dcde9167c02ba1-187b0.png\\\"\\n        srcset=\\\"/static/8d7fe9904055b6e733dcde9167c02ba1-855d2.png 163w,\\n/static/8d7fe9904055b6e733dcde9167c02ba1-07b9d.png 325w,\\n/static/8d7fe9904055b6e733dcde9167c02ba1-187b0.png 410w\\\"\\n        sizes=\\\"(max-width: 410px) 100vw, 410px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>But where is <code>_index2</code> coming from? And where is <code>_index2.default</code> being called? Clearly we need to see the actual transpiled code, not just its representation in the debugger. We can select the transpiled files in the Sources file tree, as seen here:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 319px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 91.22257053291534%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAClklEQVQ4y5VUyXLaQBDV//9BviC3VKpyzMmV2GWbVYCxMEhIILQhoRVsSYiX7rblxM4Be6qaGXp6Xr/epGRpit1uJ5JlGfI8R5LESEnfSlEUoovjGDnZZNlfHd9nont+qziOg/F4hM7tDe7uNTHU9QUGgx66vR4md1MyLGi/x8WvK1xeXuO2O0Cc5pg/aGLT6/ehqqqAK+w1iiK0OzONSMIwFEniCOZmh44WQ9UzDBcZurMEmrlDsA2RJomwY7CEzgoDjEYjGIYBTdPgeR4MXcdkMhav0+kUs5mGITFeWUu6m2M8GmLCUXU6cF1XQm3DVhiVFSxxnJCXlDxvRcIwejHOhQGfOSVpmiF5yR3/3+/3r6Js+XEQiNgbF36whW6YmC8MWGsbVVXjM0thVNu24Ww22DieMCuKPeq6RlmWOB6Pbx6cTqc38l6n+L4Py7KwIjYP84WwZJDWmFfTNDgcHv8D51WW1VuG/JNSjowUcPMTwsAXpo7rwVytafexNFciprWG7bhyt7I34twiG07PeuPQOxcKM+HE9vUQN+YjNGONbp+qONVwP5vLuTccYWEsJaeu58P3A9oDyfeOCmmYloB5pFdaqnmaYLY9wSKmGZ3DaEdhHqTXWuOqPl8g5TWxTQnP/I7AHWE2X0IdT8QzTwnnjsE4l++LwsL6pnkpSgvY1AcUzjeUuQ4viCgkT1gm1HO8jsdGHrZVPcuwOT4hd34gC4dUDJcKYEnSuTDT+5mE/G+LnAckhun6KwGqVBAaL/oocDUzmaICT0/lJwGJYeH/xCE16OOQPn+qCOh9U3+4KE29R7L8gtC+wHVHxUDl4ujSOr+vbqRF2ib/EMPTqUH96ONYpShpfquqkvHjWeZw2yk5x/IPoOJakxBOg3IAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Sources File Tree\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/8eef1c5b8517f1c23727ec7e47d0f913-a9fb3.png\\\"\\n        srcset=\\\"/static/8eef1c5b8517f1c23727ec7e47d0f913-a16ad.png 163w,\\n/static/8eef1c5b8517f1c23727ec7e47d0f913-a9fb3.png 319w\\\"\\n        sizes=\\\"(max-width: 319px) 100vw, 319px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>And we can \\\"pretty-print\\\" the transpiled code to improve its readability.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 194px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 122.16494845360826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD10lEQVQ4y6VVy24iVxDlF/MB2UVZZpd1fmAWWSdSFok0i1HGI1mOEieWDQyYGGPej27ANK9+AP0Emm7obk6qLgLbmljK40qle+teOFSdU1WkdF2H4zgn8zwPm80G/noNf7WC7/vCF3d0fu4/v98EgTinVFWFbdtYLBZQFAWu60LVdBjjEfxGBV6tjGA8RDAhvychNDQk263wNyMFoTZFMB0L8x97T4Dz+RyyLIsIR6MRdPJjx4ZTvMWyURX7Smoj1FUB4j0Uxf2KzO/JcPIZOHf5l4DtdluE/X/WC8BWq3VIme7Y53uXeJ3PZtA1Fcz3ivzYc7GzLZHmznWAJAH2e6ynzktASZLEnslkUKvVBKfsd+UuPmazuC0UMCM/MhdYU5pepSTAV0FImDGsjnUAZHVnFEW1SpyQslEUibsCAZTLZTSbDbSIDlMZYNWViLsa1t0OvHIRm8cuZiTcut9FOBk+AXIkjUZDlACvgMpA7nYhdTrotbuUso7AtUlxBf6gR2pT+lKHzn1s1TG2izlWcudTDhlwT3wc187YYPFxAvNehVkzMC8ZUNNjeJILYzbH7u9EOabM6R0jZNCEyLZ0E72yjGFrgFFLQStTRTvXwHw4RaWk0+fjE5hlhq+nfFzGzED+z1uyPB6qZXQoLYWKeraYknBrDBUSKdphYQZoNqzXAVkcrkt1qopS2lJ3sMVxfLIoSoSAnE0UJ9jtkicOTdMUHcKdwqAMyDTwDy2X3itlvP/kfIqQizaTzYgzRzYcjqio3f/WKQzCw6HT7sDxCNyaQDG6UPQe4iSCZo9hrWZwfeoc38LYfERHrdL9CObSwGKpw6T3qaU8AfJeLN4ToI2+1sadfINSPwvDmeDnwve4aZ7jYZBDXvodf9Q/4F3hO5zd/YDz0k+oKLe4pvcfs98ipWkaLMuibmiiXq8L8H6vD3WiYaHNic/g36V8BBwMBmJ88TCY0iyc0TAwSZwliRPmrhDKTUF7EkdEQyyo4P5N9snBqGb3+2cqs7oelceKJvVpcUudv8Pml/eIhv2DluKL+1dNAHKEFpUNl45LEe/qDwivf0Xw4a04nxaPqX80DwnQodQsTvPrL+F88RmW17/BJ39LHwppUGzJQh79tD+3Y8GHYSgsxcXLkan8Z3VfgP3V5zDffIM1/Y9w47uWeSorpoZBuPCPAPzdQ/EvRTMIwEqlAhZHqlbgUJ9Wi0Xc5XJI39zg8vJSvLNoFxcXSKfTyNHb1dWVmJf5fB5nZ2cCdE38p/jAXcKpmxTBkiKwXU+c+Y0jY2Oe2T/e8c7R8T0HxaJyhH8BIhYBFtf80yUAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Pretty Print Button\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/0ad11bac5c6217bb6e808a9d24419ef1-551fb.png\\\"\\n        srcset=\\\"/static/0ad11bac5c6217bb6e808a9d24419ef1-f958f.png 163w,\\n/static/0ad11bac5c6217bb6e808a9d24419ef1-551fb.png 194w\\\"\\n        sizes=\\\"(max-width: 194px) 100vw, 194px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Now we finally see our transpiled code in all its glory! We'll want to look at both <code>index.js</code> and <code>spec.js</code> to get a complete picture of what's going wrong. Here's both of the transpiled files:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"use strict\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n        Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">defineProperty</span><span class=\\\"token punctuation\\\">(</span>exports<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"__esModule\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            value<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> sum <span class=\\\"token operator\\\">=</span> exports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">'use strict'</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./index'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index2 <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span>_index<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span>obj<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> obj <span class=\\\"token operator\\\">&amp;&amp;</span> obj<span class=\\\"token punctuation\\\">.</span>__esModule <span class=\\\"token operator\\\">?</span> obj <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">:</span> obj\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">debugger</span> <span class=\\\"token punctuation\\\">;</span><span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n                _index2<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>Without getting too much into the details of babel's output, we can get a feeling for how this code works:</p>\\n<ol>\\n<li>In <code>index.js</code>, Babel passes in an <code>exports</code> object, sets <code>exports.__esModule</code> to true, and sets <code>exports.sum</code> to our sum function.</li>\\n<li>In <code>spec.js</code>, Babel uses a <code>require</code> method to get the value of the <code>index.js</code> module, which we can assume to be the <code>exports</code> object in <code>index.js</code>.</li>\\n<li>The code sees that the imported object's <code>__esModule</code> property is true, so it sets <code>_index2.default</code> to the default export.</li>\\n<li>The <code>sum</code> invocation in our original code is replaced with <code>(0, _index2.default)</code>, which evaluates to <code>_index2.default</code>. (The reasons for this specific syntax are beyond the scope of this blog post.)</li>\\n</ol>\\n<p>Seems like we're getting somewhere! If <code>index.js</code> sets <code>exports.sum</code> to our sum function, then we would expect <code>spec.js</code> to use it like <code>_index2.sum</code>. Instead, it tries to use <code>_index2.default</code>, which explains our original error...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p><code>_index2.default</code> isn't a function because it's undefined, as we saw when we looked in the <code>_index2</code> object in the Debugger Scope. But how can we fix our original code? We seem to be accessing the <code>sum</code> function in the wrong way, so let's check out how we're importing and exporting the function:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n</code></pre>\\n      </div>\\n<p>Ah-ha! We're exporting <code>sum</code> as a named variable and importing it as the default. To fix this error, we can either change the named export into a default export or change the default import into a named import. Let's do the former:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n</code></pre>\\n      </div>\\n<p>Now we run <code>npm t</code> once again, and we get...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>PASS  ./spec.js\\n sum\\n   ✓ correctly adds 1 and 1 (5ms)\\n\\nTest Suites: 1 passed, 1 total\\nTests:       1 passed, 1 total\\nSnapshots:   0 total\\nTime:        1.602s\\nRan all test suites.</code></pre>\\n      </div>\\n<p>Passing Tests = <em>Pure Bliss</em> :)</p>\\n<p>And now we can feel extra happy, because we debugged the error, we understand where it's coming from, and we'll be unfazed if we see it again.</p>\\n<p>The takeaway from this round of debugging is: do your best to <em>deeply</em> understand the errors you encounter. If you think you understand an error, but you're not sure, it can help to write down any questions that are floating around your head. Then you can methodically tackle each question and improve your debugging skills. This is a strategy that I'm learning myself, and I hope it proves useful to you.</p>\",\"frontmatter\":{\"title\":\"Digging into a Babel-Related Error in Jest\",\"date\":\"October 11, 2017\",\"draft\":null}}},\"pathContext\":{\"slug\":\"babel-error-in-jest\",\"_PARENT\":\"SOURCE\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---blog-babel-error-in-jest-90feac1c110e20e38675.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Not so long ago, I decided to add some tests to a small program I wrote. I chose to use <a href=\\\"https://facebook.github.io/jest/\\\">jest</a>, a nice testing platform by facebook that I've enjoyed using in the past. This time, however, I had some trouble: I ran into a babel-related error with my very first test. I'd like to be a world-class debugger someday, so I figured I'd dig in and really try to understand the error.</p>\\n<p>This post describes how to set up a little app that reproduces the error, and next, how to debug the error using tools from the modern JavaScript toolbox.</p>\\n<h2>Reproducing the Error</h2>\\n<p>(If you'd like, you can skip this section and reproduce the error by cloning this <a href=\\\"https://github.com/nwshane/jest-babel-error\\\">repository</a>.)</p>\\n<p>In order to get jest to show us this babel-related error, we'll do the following things:</p>\\n<ol>\\n<li>Write a sum function that we will test.</li>\\n<li>Write a simple jest test for the sum function.</li>\\n<li>Create an npm <code>test</code> script to run our tests.</li>\\n<li>Install jest.</li>\\n<li>Configure babel to recognize ES2015 imports.</li>\\n</ol>\\n<p>Let's start out by creating that sum function.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n</code></pre>\\n      </div>\\n<p>Simple enough. Now we want to test our sum function, because we're responsible devs, and that's what responsible devs do.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n</code></pre>\\n      </div>\\n<p>(If you saw the bug in this code, then good for you! If not, then that's fine—I didn't see it either, so I had to learn how to debug it.)</p>\\n<p>Two more steps until we can run our tests. First, we'll create a <code>package.json</code> file containing our <code>test</code> script, which will run jest. Run <code>npm init</code>, and answer the <code>test command</code> prompt with <code>jest</code> (you can use the defaults for everything else).</p>\\n<p>Finally, we install jest with <code>npm i jest</code>.</p>\\n<p>Hurray! We now run the test script with <code>npm t</code> (a shortcut for <code>npm test</code>, or <code>npm run test</code>), and we see...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>Test suite failed to run\\n\\nSyntaxError: Unexpected token import</code></pre>\\n      </div>\\n<p>Dang! It looks like jest doesn't understand the <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\\\">ES2015 import</a> syntax. That's okay, we just need to install <a href=\\\"https://babeljs.io/\\\">babel</a> and the <a href=\\\"https://babeljs.io/docs/plugins/preset-es2015/\\\">ES2015 babel preset</a>, which jest will use to transform the import syntax into something it understands.</p>\\n<p>Jest's documentation on <a href=\\\"https://facebook.github.io/jest/docs/en/getting-started.html#using-babel\\\">configuring babel</a> is a bit complicated with a number of side notes. Long story short, jest comes with a library called <a href=\\\"https://github.com/facebook/jest/tree/master/packages/babel-jest\\\">babel-jest</a>, so all we have to do to make jest understand our <code>import</code> syntax is the following:</p>\\n<ol>\\n<li>Add a <code>.babelrc</code> file to our project:</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"presets\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"es2015\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span>\\n</code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li>Install the ES2015 preset: <code>npm i babel-preset-es2015</code></li>\\n</ol>\\n<p>With that done, babel should be good to go.</p>\\n<h2>Debugging our Babel-Related Error</h2>\\n<p>Running our tests again (<code>npm t</code>), we get a more cryptic error this time:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p>Hey, at least our test suite is running now!</p>\\n<p>If you don't have a lot of experience with babel, then this error will seem a bit strange. Where in the world did <code>_index2.default</code> come from? Who cares if it's not a function—I didn't write anything like that in my code!</p>\\n<p>Hold on a moment. Let's try to remember what babel is doing. Babel is a transpiler, so it's transforming your code into something that jest can understand. Does that mean it might be transforming variable names as well, and outputting things like <code>_index2.default</code>?</p>\\n<p>In order to answer that question, let's consult a handy section of the jest docs, aptly named, \\\"<a href=\\\"https://facebook.github.io/jest/docs/en/troubleshooting.html#tests-are-failing-and-you-don-t-know-why\\\">Tests are Failing and You Don't Know Why</a>\\\". The docs recommend we use a debugger, which seems like a great idea for getting more info!</p>\\n<p>Let's add a <code>debugger</code> line into our code, to tell our debugging tool to stop at that line:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">debugger</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n</code></pre>\\n      </div>\\n<p>Next, let's run our tests as recommended by the docs:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>node --inspect-brk node_modules/.bin/jest --runInBand</code></pre>\\n      </div>\\n<p>This gives us the following output:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>Debugger listening on ws://127.0.0.1:9229/cedc923a-cc9f-4531-a947-9c1ef7226bc8\\nFor help see https://nodejs.org/en/docs/inspector</code></pre>\\n      </div>\\n<p>Looking at the above link, we can see a bunch of different options for debugging our code. Let's use Chrome, since most of us will have it installed already.</p>\\n<ol>\\n<li>Navigate to <code>chrome://inspect/</code> in Chrome.</li>\\n<li>In the <code>Remote Target</code> section, you should see the script <code>node_modules/.bin/jest</code>. Click the <code>inspect</code> link below it.</li>\\n</ol>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 376px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 80.58510638297874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQ4y5VUyXLaQBDVr+cHcs85X5GcXIkPYSvAQQJkgdDCJgvtAu0v3UPAYHAq7qqunuoZ9bzX/UZSWZao6wZFUaCqauEnq+saBe2XVYWmac7O9nZ9Msl1XfT7A6hTFTNNo/UQ7s4Tm34QoNVuoz8Yot3toD/8fVX4nkunyheX4DXXfNilJI4gywoURYHn+VcF87LBt2kFZTKGYRjQFwZMitpshqmqUtTgEYtLk/I8RxCESJL4LkI3bbDf769QcG8r6ivHpqnFDM4FORnHMbIsuylYVA26VkXIdBimCd0wYVom5vqcooUFoZ1Mx3Dc3WvBw+EAx3GwFb4VaC5NnkeY2ylGWgSF1k/PEZ6NBFMjphhDsxNoZgx9mWCghkeEDLm5MxXOlVV9pMrniF5T1xf06zNtsSaXWH+bzRpJmt4UzIscYRSB+8zIuW+e51G+ELrNKP/WpIwor9ZrQZs1KahvNwJBTIPq9np4kmXSImmVpmtRD1vdHh5+PorvWBkBTZq/TQmU9K8XUBLCKIqxp0vjJEEQhgKp5/t4zwRCRse+oxfCg3lxXohSSf0qMRpP0Op0YNBUR8qYENqkv/n7BfktR9Snw13ZFHhQv2Np27CXK6xWy6N8SEa2bcGi/IKkFAa+6C3Tl7jRzJ3lc2/KfupD1nz0FQf2lvRK57IwELplEBzFT4SGxOAk/KfVf3sbf/6E9OsXFMpQSOiGMj5oQocV/fIIZd5+RP7rB0pdO+//AfU20R51RfaeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Remote Target\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/c3c45424dfaefd9b73f69e06708a1f97-355f8.png\\\"\\n        srcset=\\\"/static/c3c45424dfaefd9b73f69e06708a1f97-2d9b1.png 163w,\\n/static/c3c45424dfaefd9b73f69e06708a1f97-17d51.png 325w,\\n/static/c3c45424dfaefd9b73f69e06708a1f97-355f8.png 376w\\\"\\n        sizes=\\\"(max-width: 376px) 100vw, 376px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<ol start=\\\"3\\\">\\n<li>Cool! Looks like a debugger! <code>--inspect-brk</code> pauses code execution at the first line of the script, so we've stopped at the first line of the jest script file. To get to our debugger line, let's press the play button.</li>\\n</ol>\\n<p>After a little wait, our <code>spec.js</code> file will open and you'll see our sum test containing the <code>debugger</code> line.</p>\\n<p><code>_index2.default</code> is still no where in sight, but that's because we're looking at the \\\"Source Map\\\" of our code—that is, the original code that we wrote. Chrome shows this to us in a couple places:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 79.39698492462311%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQ4y+2Uy2rDMBBF/f+f0VWhi5JFoR/RRSkNJo5rx684tuTYliXHD9m3Hi1CFyEEmu564cJoJI6G0SCrKAqQq6pCXddomgZSSrOmmHK3mjgWYwxpmiIMQ3DOkec54ihGlmVg2w3E6hHK/kSz/oDYrKGWS5RSF12WJSwhhIHIvcDQdGDshK46YZAdhqpEl6WY5xmkeRwwTxrXZIBJksBxHNi2Df61hXRsVFGIemtDFRzdIV0ukKaKXgn0fX8dGEYJajXj9cXD6tnF2/sBGe+wzxT8iMMLGYJ46ZOczLlrNkDq4fF4RNv2OHUjxpGsofVkYqqI1rfo3MO2bXEPGSC9zr30D/wD4MTz+wI1O2D03d8Baai11mePokL79AC9DPXP/C22qDoa7CAIEEURfN9HHMfYU+x5Ju+6Lna7nYlpn87T13bJ3+wn3Um7PiHuAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Source Map\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/977ee10b94867637f15ba3cbb4d13330-f636d.png\\\"\\n        srcset=\\\"/static/977ee10b94867637f15ba3cbb4d13330-1783f.png 163w,\\n/static/977ee10b94867637f15ba3cbb4d13330-7ad53.png 325w,\\n/static/977ee10b94867637f15ba3cbb4d13330-f636d.png 597w\\\"\\n        sizes=\\\"(max-width: 597px) 100vw, 597px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Generally, it's much nicer to look at the Source Map of some code than its transpiled version, which is why Chrome shows it to us. However, we're interested to see whether our transpiled code contains <code>_index2.default</code>, so we need to go beyond the source map.</p>\\n<p>First, let's look in the Scope section of the debugging window. Scope contains all the variables that are accessible where we paused our code with <code>debugger</code>, and notably it shows us variables from our <em>transpiled</em> code, which is what we want to see. Taking a look around, we open up the <code>Closure</code> object, and... there's <code>_index2</code>! Open that up, and we see a <code>sum</code> property, as well as an <code>__esModule</code> property, but no <code>default</code> property.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 88.04878048780488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQ4y6VU2ZKbMBDk/z9pH1KVl00cs3G2NjY2iMMcQlziNiwF7kjaysO++FhPVdcISmqGnh5pnHMErILMjDEkSYKqqhDHscpRFKm1YRhqT13XF6EVRYGXA0cYhnAcRxHIgzKXZYntdgvXdbFarZBl2XXCJNnBPDyBGN8QOD8RuM9Iot/w3R9wzO9YpgiY6c3Q+i5FXTooc4KE7pDGBsrCRpGZ4LmF94FhGm+HJvXZ7/dYv+hwvSPatn0IWhhS2LYtRN9hres4mOZVnS43hX90VDZHii7zQ4SSxPNcbF5fQUSlXdc9BGUbxmJY5IPs0dCmaVJ+K0JBfEwRBgFMy4LvB18jlBVKE3uiw0eBXDzLrts2QZZmIIQI2DBFsyyLgCXpbRWe6h7UjMGcFMMwYF6WTxvneVb5fD5fJ5TBQgZGGOqqFVUUykrSl3mWo+/7+zT8/+X3XlQbNmjiFl3WCxtVoKwBL4f7CXnBcRIHJXo+iN8e4QgdPc8HpfHthPKKyvNCIEeRcvVymRfM0/xJu0sxDCdkgiNNU2hN06jpoGJapMnHcbwbcoblXRqJK1CjlOLt7xtWax2/9DU2mz84+v6XR+8fFDBg9k61GfIAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Debugger Scope\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/8d7fe9904055b6e733dcde9167c02ba1-187b0.png\\\"\\n        srcset=\\\"/static/8d7fe9904055b6e733dcde9167c02ba1-855d2.png 163w,\\n/static/8d7fe9904055b6e733dcde9167c02ba1-07b9d.png 325w,\\n/static/8d7fe9904055b6e733dcde9167c02ba1-187b0.png 410w\\\"\\n        sizes=\\\"(max-width: 410px) 100vw, 410px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>But where is <code>_index2</code> coming from? And where is <code>_index2.default</code> being called? Clearly we need to see the actual transpiled code, not just its representation in the debugger. We can select the transpiled files in the Sources file tree, as seen here:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 319px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 91.22257053291534%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAClklEQVQ4y5VUyXLaQBDV//9BviC3VKpyzMmV2GWbVYCxMEhIILQhoRVsSYiX7rblxM4Be6qaGXp6Xr/epGRpit1uJ5JlGfI8R5LESEnfSlEUoovjGDnZZNlfHd9nont+qziOg/F4hM7tDe7uNTHU9QUGgx66vR4md1MyLGi/x8WvK1xeXuO2O0Cc5pg/aGLT6/ehqqqAK+w1iiK0OzONSMIwFEniCOZmh44WQ9UzDBcZurMEmrlDsA2RJomwY7CEzgoDjEYjGIYBTdPgeR4MXcdkMhav0+kUs5mGITFeWUu6m2M8GmLCUXU6cF1XQm3DVhiVFSxxnJCXlDxvRcIwejHOhQGfOSVpmiF5yR3/3+/3r6Js+XEQiNgbF36whW6YmC8MWGsbVVXjM0thVNu24Ww22DieMCuKPeq6RlmWOB6Pbx6cTqc38l6n+L4Py7KwIjYP84WwZJDWmFfTNDgcHv8D51WW1VuG/JNSjowUcPMTwsAXpo7rwVytafexNFciprWG7bhyt7I34twiG07PeuPQOxcKM+HE9vUQN+YjNGONbp+qONVwP5vLuTccYWEsJaeu58P3A9oDyfeOCmmYloB5pFdaqnmaYLY9wSKmGZ3DaEdhHqTXWuOqPl8g5TWxTQnP/I7AHWE2X0IdT8QzTwnnjsE4l++LwsL6pnkpSgvY1AcUzjeUuQ4viCgkT1gm1HO8jsdGHrZVPcuwOT4hd34gC4dUDJcKYEnSuTDT+5mE/G+LnAckhun6KwGqVBAaL/oocDUzmaICT0/lJwGJYeH/xCE16OOQPn+qCOh9U3+4KE29R7L8gtC+wHVHxUDl4ujSOr+vbqRF2ib/EMPTqUH96ONYpShpfquqkvHjWeZw2yk5x/IPoOJakxBOg3IAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Sources File Tree\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/8eef1c5b8517f1c23727ec7e47d0f913-a9fb3.png\\\"\\n        srcset=\\\"/static/8eef1c5b8517f1c23727ec7e47d0f913-a16ad.png 163w,\\n/static/8eef1c5b8517f1c23727ec7e47d0f913-a9fb3.png 319w\\\"\\n        sizes=\\\"(max-width: 319px) 100vw, 319px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>And we can \\\"pretty-print\\\" the transpiled code to improve its readability.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 194px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 122.16494845360826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD10lEQVQ4y6VVy24iVxDlF/MB2UVZZpd1fmAWWSdSFok0i1HGI1mOEieWDQyYGGPej27ANK9+AP0Emm7obk6qLgLbmljK40qle+teOFSdU1WkdF2H4zgn8zwPm80G/noNf7WC7/vCF3d0fu4/v98EgTinVFWFbdtYLBZQFAWu60LVdBjjEfxGBV6tjGA8RDAhvychNDQk263wNyMFoTZFMB0L8x97T4Dz+RyyLIsIR6MRdPJjx4ZTvMWyURX7Smoj1FUB4j0Uxf2KzO/JcPIZOHf5l4DtdluE/X/WC8BWq3VIme7Y53uXeJ3PZtA1Fcz3ivzYc7GzLZHmznWAJAH2e6ynzktASZLEnslkUKvVBKfsd+UuPmazuC0UMCM/MhdYU5pepSTAV0FImDGsjnUAZHVnFEW1SpyQslEUibsCAZTLZTSbDbSIDlMZYNWViLsa1t0OvHIRm8cuZiTcut9FOBk+AXIkjUZDlACvgMpA7nYhdTrotbuUso7AtUlxBf6gR2pT+lKHzn1s1TG2izlWcudTDhlwT3wc187YYPFxAvNehVkzMC8ZUNNjeJILYzbH7u9EOabM6R0jZNCEyLZ0E72yjGFrgFFLQStTRTvXwHw4RaWk0+fjE5hlhq+nfFzGzED+z1uyPB6qZXQoLYWKeraYknBrDBUSKdphYQZoNqzXAVkcrkt1qopS2lJ3sMVxfLIoSoSAnE0UJ9jtkicOTdMUHcKdwqAMyDTwDy2X3itlvP/kfIqQizaTzYgzRzYcjqio3f/WKQzCw6HT7sDxCNyaQDG6UPQe4iSCZo9hrWZwfeoc38LYfERHrdL9CObSwGKpw6T3qaU8AfJeLN4ToI2+1sadfINSPwvDmeDnwve4aZ7jYZBDXvodf9Q/4F3hO5zd/YDz0k+oKLe4pvcfs98ipWkaLMuibmiiXq8L8H6vD3WiYaHNic/g36V8BBwMBmJ88TCY0iyc0TAwSZwliRPmrhDKTUF7EkdEQyyo4P5N9snBqGb3+2cqs7oelceKJvVpcUudv8Pml/eIhv2DluKL+1dNAHKEFpUNl45LEe/qDwivf0Xw4a04nxaPqX80DwnQodQsTvPrL+F88RmW17/BJ39LHwppUGzJQh79tD+3Y8GHYSgsxcXLkan8Z3VfgP3V5zDffIM1/Y9w47uWeSorpoZBuPCPAPzdQ/EvRTMIwEqlAhZHqlbgUJ9Wi0Xc5XJI39zg8vJSvLNoFxcXSKfTyNHb1dWVmJf5fB5nZ2cCdE38p/jAXcKpmxTBkiKwXU+c+Y0jY2Oe2T/e8c7R8T0HxaJyhH8BIhYBFtf80yUAAAAASUVORK5CYII='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Pretty Print Button\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/0ad11bac5c6217bb6e808a9d24419ef1-551fb.png\\\"\\n        srcset=\\\"/static/0ad11bac5c6217bb6e808a9d24419ef1-f958f.png 163w,\\n/static/0ad11bac5c6217bb6e808a9d24419ef1-551fb.png 194w\\\"\\n        sizes=\\\"(max-width: 194px) 100vw, 194px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Now we finally see our transpiled code in all its glory! We'll want to look at both <code>index.js</code> and <code>spec.js</code> to get a complete picture of what's going wrong. Here's both of the transpiled files:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"use strict\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n        Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">defineProperty</span><span class=\\\"token punctuation\\\">(</span>exports<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"__esModule\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            value<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> sum <span class=\\\"token operator\\\">=</span> exports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span>module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">'use strict'</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./index'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index2 <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span>_index<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span>obj<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> obj <span class=\\\"token operator\\\">&amp;&amp;</span> obj<span class=\\\"token punctuation\\\">.</span>__esModule <span class=\\\"token operator\\\">?</span> obj <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">:</span> obj\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">debugger</span> <span class=\\\"token punctuation\\\">;</span><span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n                _index2<span class=\\\"token punctuation\\\">.</span><span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\" spellcheck=\\\"true\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n</code></pre>\\n      </div>\\n<p>Without getting too much into the details of babel's output, we can get a feeling for how this code works:</p>\\n<ol>\\n<li>In <code>index.js</code>, Babel passes in an <code>exports</code> object, sets <code>exports.__esModule</code> to true, and sets <code>exports.sum</code> to our sum function.</li>\\n<li>In <code>spec.js</code>, Babel uses a <code>require</code> method to get the value of the <code>index.js</code> module, which we can assume to be the <code>exports</code> object in <code>index.js</code>.</li>\\n<li>The code sees that the imported object's <code>__esModule</code> property is true, so it sets <code>_index2.default</code> to the default export.</li>\\n<li>The <code>sum</code> invocation in our original code is replaced with <code>(0, _index2.default)</code>, which evaluates to <code>_index2.default</code>. (The reasons for this specific syntax are beyond the scope of this blog post.)</li>\\n</ol>\\n<p>Seems like we're getting somewhere! If <code>index.js</code> sets <code>exports.sum</code> to our sum function, then we would expect <code>spec.js</code> to use it like <code>_index2.sum</code>. Instead, it tries to use <code>_index2.default</code>, which explains our original error...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p><code>_index2.default</code> isn't a function because it's undefined, as we saw when we looked in the <code>_index2</code> object in the Debugger Scope. But how can we fix our original code? We seem to be accessing the <code>sum</code> function in the wrong way, so let's check out how we're importing and exporting the function:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n</code></pre>\\n      </div>\\n<p>Ah-ha! We're exporting <code>sum</code> as a named variable and importing it as the default. To fix this error, we can either change the named export into a default export or change the default import into a named import. Let's do the former:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code><span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">(</span>a<span class=\\\"token punctuation\\\">,</span> b<span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\" spellcheck=\\\"true\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n</code></pre>\\n      </div>\\n<p>Now we run <code>npm t</code> once again, and we get...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-none\\\"><code>PASS  ./spec.js\\n sum\\n   ✓ correctly adds 1 and 1 (5ms)\\n\\nTest Suites: 1 passed, 1 total\\nTests:       1 passed, 1 total\\nSnapshots:   0 total\\nTime:        1.602s\\nRan all test suites.</code></pre>\\n      </div>\\n<p>Passing Tests = <em>Pure Bliss</em> :)</p>\\n<p>And now we can feel extra happy, because we debugged the error, we understand where it's coming from, and we'll be unfazed if we see it again.</p>\\n<p>The takeaway from this round of debugging is: do your best to <em>deeply</em> understand the errors you encounter. If you think you understand an error, but you're not sure, it can help to write down any questions that are floating around your head. Then you can methodically tackle each question and improve your debugging skills. This is a strategy that I'm learning myself, and I hope it proves useful to you.</p>\",\"frontmatter\":{\"title\":\"Digging into a Babel-Related Error in Jest\",\"date\":\"October 11, 2017\",\"draft\":null}}},\"pathContext\":{\"slug\":\"babel-error-in-jest\",\"_PARENT\":\"SOURCE\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/blog-babel-error-in-jest.json\n// module id = 441\n// module chunks = 1478269245095"],"sourceRoot":""}