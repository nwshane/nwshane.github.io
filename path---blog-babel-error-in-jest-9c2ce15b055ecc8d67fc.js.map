{"version":3,"sources":["webpack:///path---blog-babel-error-in-jest-9c2ce15b055ecc8d67fc.js","webpack:///./.cache/json/blog-babel-error-in-jest.json"],"names":["webpackJsonp","494","module","exports","data","markdownRemark","html","frontmatter","title","date","draft","pathContext","slug"],"mappings":"AAAAA,cAAc,gBAERC,IACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,gBAAkBC,KAAA;AAAmk8BC,aAAyyKC,MAAA,6CAAAC,KAAA,mBAAAC,MAAA,QAA8FC,aAAgBC,KAAA","file":"path---blog-babel-error-in-jest-9c2ce15b055ecc8d67fc.js","sourcesContent":["webpackJsonp([1478269245095],{\n\n/***/ 494:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Not so long ago, I decided to add some tests to a small program I wrote. I chose to use <a href=\\\"https://facebook.github.io/jest/\\\">jest</a>, a nice testing platform by facebook that I've enjoyed using in the past. This time, however, I had some trouble: I ran into a babel-related error with my very first test. I'd like to be a world-class debugger someday, so I figured I'd dig in and really try to understand the error.</p>\\n<p>This post describes how to set up a little app that reproduces the error, and next, how to debug the error using tools from the modern JavaScript toolbox.</p>\\n<h2>Reproducing the Error</h2>\\n<p>(If you'd like, you can skip this section and reproduce the error by cloning this <a href=\\\"https://github.com/nwshane/jest-babel-error\\\">repository</a>.)</p>\\n<p>In order to get jest to show us this babel-related error, we'll do the following things:</p>\\n<ol>\\n<li>Write a sum function that we will test.</li>\\n<li>Write a simple jest test for the sum function.</li>\\n<li>Create an npm <code class=\\\"language-text\\\">test</code> script to run our tests.</li>\\n<li>Install jest.</li>\\n<li>Configure babel to recognize ES2015 imports.</li>\\n</ol>\\n<p>Let's start out by creating that sum function.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>Simple enough. Now we want to test our sum function, because we're responsible devs, and that's what responsible devs do.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>(If you saw the bug in this code, then good for you! If not, then that's fine—I didn't see it either, so I had to learn how to debug it.)</p>\\n<p>Two more steps until we can run our tests. First, we'll create a <code class=\\\"language-text\\\">package.json</code> file containing our <code class=\\\"language-text\\\">test</code> script, which will run jest. Run <code class=\\\"language-text\\\">npm init</code>, and answer the <code class=\\\"language-text\\\">test command</code> prompt with <code class=\\\"language-text\\\">jest</code> (you can use the defaults for everything else).</p>\\n<p>Finally, we install jest with <code class=\\\"language-text\\\">npm i jest</code>.</p>\\n<p>Hurray! We now run the test script with <code class=\\\"language-text\\\">npm t</code> (a shortcut for <code class=\\\"language-text\\\">npm test</code>, or <code class=\\\"language-text\\\">npm run test</code>), and we see...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">Test suite failed to run\\n\\nSyntaxError: Unexpected token import</code></pre>\\n      </div>\\n<p>Dang! It looks like jest doesn't understand the <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\\\">ES2015 import</a> syntax. That's okay, we just need to install <a href=\\\"https://babeljs.io/\\\">babel</a> and the <a href=\\\"https://babeljs.io/docs/plugins/preset-es2015/\\\">ES2015 babel preset</a>, which jest will use to transform the import syntax into something it understands.</p>\\n<p>Jest's documentation on <a href=\\\"https://facebook.github.io/jest/docs/en/getting-started.html#using-babel\\\">configuring babel</a> is a bit complicated with a number of side notes. Long story short, jest comes with a library called <a href=\\\"https://github.com/facebook/jest/tree/master/packages/babel-jest\\\">babel-jest</a>, so all we have to do to make jest understand our <code class=\\\"language-text\\\">import</code> syntax is the following:</p>\\n<ol>\\n<li>Add a <code class=\\\"language-text\\\">.babelrc</code> file to our project:</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code class=\\\"language-json\\\"><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"presets\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"es2015\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li>Install the ES2015 preset: <code class=\\\"language-text\\\">npm i babel-preset-es2015</code></li>\\n</ol>\\n<p>With that done, babel should be good to go.</p>\\n<h2>Debugging our Babel-Related Error</h2>\\n<p>Running our tests again (<code class=\\\"language-text\\\">npm t</code>), we get a more cryptic error this time:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p>Hey, at least our test suite is running now!</p>\\n<p>If you don't have a lot of experience with babel, then this error will seem a bit strange. Where in the world did <code class=\\\"language-text\\\">_index2.default</code> come from? Who cares if it's not a function—I didn't write anything like that in my code!</p>\\n<p>Hold on a moment. Let's try to remember what babel is doing. Babel is a transpiler, so it's transforming your code into something that jest can understand. Does that mean it might be transforming variable names as well, and outputting things like <code class=\\\"language-text\\\">_index2.default</code>?</p>\\n<p>In order to answer that question, let's consult a handy section of the jest docs, aptly named, \\\"<a href=\\\"https://facebook.github.io/jest/docs/en/troubleshooting.html#tests-are-failing-and-you-don-t-know-why\\\">Tests are Failing and You Don't Know Why</a>\\\". The docs recommend we use a debugger, which seems like a great idea for getting more info!</p>\\n<p>Let's add a <code class=\\\"language-text\\\">debugger</code> line into our code, to tell our debugging tool to stop at that line:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">debugger</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>Next, let's run our tests as recommended by the docs:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">node --inspect-brk node_modules/.bin/jest --runInBand</code></pre>\\n      </div>\\n<p>This gives us the following output:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">Debugger listening on ws://127.0.0.1:9229/cedc923a-cc9f-4531-a947-9c1ef7226bc8\\nFor help see https://nodejs.org/en/docs/inspector</code></pre>\\n      </div>\\n<p>Looking at the above link, we can see a bunch of different options for debugging our code. Let's use Chrome, since most of us will have it installed already.</p>\\n<ol>\\n<li>Navigate to <code class=\\\"language-text\\\">chrome://inspect/</code> in Chrome.</li>\\n<li>In the <code class=\\\"language-text\\\">Remote Target</code> section, you should see the script <code class=\\\"language-text\\\">node_modules/.bin/jest</code>. Click the <code class=\\\"language-text\\\">inspect</code> link below it.</li>\\n</ol>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 376px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 80.58510638297874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACU0lEQVQ4y31UyXbaQBDk/y/5gPxKbjnkFD9DiAxI1g4IaUZC+06le4QwOLb7vZY0W09Vd7UWbduiLEsURYG6blBVFcZxBFtV12q+LCs13/e9mr9cLp/6IkkSaNoGvr+HbdlY/9XocK0Oer6H5WqFl80GT8/PEHFyC/iZLfquQ5qmyLLsAQE90Q1AQ49h6BXqYRjAjHgff7Pz/APCssjhOA4sQlcQdbZxnAKaMbD2Mhz3LvaHA8Iogus6hNyH47o0Fv+lYNERwiQ5o2ma2+J4ReilgH7MIaIAQkok5zOEEJPTODgFiJPkSvZypUzweSMnn4NPN00bTjngy5oChgjCCDKOKUiokEoZK6ShmFCOM0LOSZZnFDRRN3PQ2cqyw9bO4AYtXuwSulvB8GqY+5rmatjHFl7QwDkUWOkpynpghEw5pkD9Q7W+quTdrndnxjmHMWmwVlXj8Vxtlyit1mts9Z2Sjut52O520OjbMC2lTS5knudKqyqHTJlzc6Y8siY52SwjtpwUIKRQ62EYqks5LaZlIaI3F7KkoNwYvKYCMiLWIE+yczAuEFtG33/WGiHUYZNMdroBwzBu8vpQ2B0X5RpQUVCtNh1IqwT2wUJMKPM8hWS5UIWZYlVXyvk8g5pdURYiurXbvVlSx9JeUt58bA0XfnCCS3I5EH2LmsF8fUUcS5KQVDKKKTWLrxqdjVVk+iUcOaIzdmi+f8MlOn1O+SOpPL7fpDGSXpufP9BpS7S/f6FbPWEIg8fWe4/obTzpbG7Fqb/vLqefwihC9JaB+Vre+w+5HNHzdWgUKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Remote Target\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-beeed.png\\\"\\n        srcset=\\\"/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-a7bfb.png 163w,\\n/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-c740e.png 325w,\\n/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-beeed.png 376w\\\"\\n        sizes=\\\"(max-width: 376px) 100vw, 376px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<ol start=\\\"3\\\">\\n<li>Cool! Looks like a debugger! <code class=\\\"language-text\\\">--inspect-brk</code> pauses code execution at the first line of the script, so we've stopped at the first line of the jest script file. To get to our debugger line, let's press the play button.</li>\\n</ol>\\n<p>After a little wait, our <code class=\\\"language-text\\\">spec.js</code> file will open and you'll see our sum test containing the <code class=\\\"language-text\\\">debugger</code> line.</p>\\n<p><code class=\\\"language-text\\\">_index2.default</code> is still no where in sight, but that's because we're looking at the \\\"Source Map\\\" of our code—that is, the original code that we wrote. Chrome shows this to us in a couple places:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 79.39698492462311%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABxUlEQVQ4y6WUW2/TQBCF/f//C0/wAuKpQuKBxyJaqaRxbCe+xPauvb5n44/ZhFahTWgpIx3Zmt09M3M0M952u+WAfEupSrRWFGVBXpaoLKXaZlRtS9U0VEZQVWehtSbPc7wsy9isN0TLEJUr4iQnDmOyoqT49hXz6T3t/U/MzTVNFNB13Vm0ElQrhWeMIYkTqk2JKWtq3WCVwQ4Tky4YJVvsDsYBOQRmLtser65r1pKhH0Zcf78n+rFCL5YYkaEKA3opc1KaoR9pHOT+MFrsHnZ2PoHEnCyeqz9OUnS948tVwOePPje3qejRkqU1QZDiLzdsEkPdWEwr6PZCPj+D6exDhuuDqKYxEn1gGHomCbmzlq4XfbqWSaJftqMM8zwfCeM4pu97XjL34BIOCu5/a+iye+nBEcdsLhE+ZlhKz506H/5fa88IlfTP08O3ED6W/JTwNOJ/Z3ju0mvwJ6HT0DmmkV3oM0vq/0L215KpNPbuFhmJN2l5mBS3Jdxwu7k2w0AjG0Z9eEcj7dQ4vwR1Z41sHIdB7ozjeBZeURSkaUoURTJmgYzZkkQ2UCjT4/791YrFYkEYhvi+z1J87o3rXVeZ+57iFw7P2zQVU8hkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Source Map\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-bc8a5.png\\\"\\n        srcset=\\\"/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-9f60b.png 163w,\\n/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-a5b96.png 325w,\\n/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-bc8a5.png 597w\\\"\\n        sizes=\\\"(max-width: 597px) 100vw, 597px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Generally, it's much nicer to look at the Source Map of some code than its transpiled version, which is why Chrome shows it to us. However, we're interested to see whether our transpiled code contains <code class=\\\"language-text\\\">_index2.default</code>, so we need to go beyond the source map.</p>\\n<p>First, let's look in the Scope section of the debugging window. Scope contains all the variables that are accessible where we paused our code with <code class=\\\"language-text\\\">debugger</code>, and notably it shows us variables from our <em>transpiled</em> code, which is what we want to see. Taking a look around, we open up the <code class=\\\"language-text\\\">Closure</code> object, and... there's <code class=\\\"language-text\\\">_index2</code>! Open that up, and we see a <code class=\\\"language-text\\\">sum</code> property, as well as an <code class=\\\"language-text\\\">__esModule</code> property, but no <code class=\\\"language-text\\\">default</code> property.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 88.04878048780488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACSklEQVQ4y51UaXPaQAz1//9D/QNt86EJKRCaEHzg2+tlfeID2/AqbdqZHEAPzbzRjL3SSk9PawipYIcl0lQgCEIkSQKlMkRRpL1t2/B9Hw8PKwiRoqpqFEWJsjwPQ6oSa6+lwzGiOKLEHFRCSom6rrF6WMKyTMzubumymL5VFFigouBzMIRYwTY/wbO+wHduEGxvEPu38OyvcK3PwBQDEIQUOEY4jeFVGFnmwXPv4Dn3sDffEHpzSPGEyF9CRCt0bYyhS3AgsB96cRWGUjkcZ4v5cgm5UxjHCft9g6ZpNZizsqrIV2/8JRiJkES8haf1E+aLBdbPz0R68Yvk4iL5F4eyo6pM09SJLJpoTFP+1yRvEqrdDlv3pWU/CDAMA7Xa/DcMbk9QVVvHRUPcTdOEw+GgE59OJxyPxzfgb9dg8KGqrCB9iUrWWmumZZEOFS4ZB14yI88zJHGMMIy0sFWmsNlsNK87SXRst7Adh8Rta0ii6HfCsxX2fY88z6GEQvAcIrYTLY1hGHX7fX9A23YkpT35VlPxOtmHCjmID6VRisRMkMkSKi/h0qAS2t2iyClR8/ct8wDYpuOEtmiRR5VGFmVIZQE/KlGU/Yeq2J1rXVfIxhMe6hFVUqORLfr2QIJ3SJ8WcStwusDZ+2oN5kuRuGMajJL5y43TCdN41FT0fUdcjrhmrD9eCCEEPw4Z8eXqTXE9DxlNfd/stRZfg4f3Hl3X6X+s5TAM6T0NePV2+PH4iNvZDIvlAvff5zoxV87T58N/Aq8cv52shJ/9XF926PUdqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Debugger Scope\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-6e092.png\\\"\\n        srcset=\\\"/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-ca167.png 163w,\\n/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-0737a.png 325w,\\n/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-6e092.png 410w\\\"\\n        sizes=\\\"(max-width: 410px) 100vw, 410px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>But where is <code class=\\\"language-text\\\">_index2</code> coming from? And where is <code class=\\\"language-text\\\">_index2.default</code> being called? Clearly we need to see the actual transpiled code, not just its representation in the debugger. We can select the transpiled files in the Sources file tree, as seen here:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 319px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 91.22257053291534%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACdElEQVQ4y5VTyXKjQAzl/49zn8vMYWq+Yg5zGi+xAdsYMItZDDY7BjvEy4vUCakklclClVBLrX6tJ6mlsiyx2+2QJAmyPEfTNMhJZ1mGNM2efCnvC18qdNs2pFNxlu2iKESctNvGkGUFw+EA2nJJgQfoug5FkXFzM8FCY19LMTLFDIVMpwqOxyM0bYHhaIzZTIVuGNjv95CqqhIHemGbpa5rIc2+gh/XkJ0DVKeF4jSY2i3caI+2oRgCqeuHM8xW4pRVVYVpmnTTDHEcY0mZTqdTTCYTGHSzqioYDP7BdR1Y1grj8UjsjUYjQXkvQB8SkA6Hg0DmG7gGnGUfwP5ec414zXu85tr2dWOMnqHI0PM8BEEIzw9hO2vMFkshxsrG9XrFVz6Jb+8Bg02E7S4Rjenu7nDbdbhcLk+grNnupfcLm9Zsi6aE4Qa7bUQ6QLxN3ryZD731vWYg8a/KE/x1TjCSM4K1Q3R1mERXmS2w1E2ocw03UxWLpYGV5cAwLWiPfpY5jdZc02nEdEiCxvmEFY3BbNMhTgv4QYCAso7iLSzbJTvEJopR1dysPTWCG9eIkemoLGmWU+Mq4ZfA3CnLtkrxZ3XGPL4gCn2sCCjLC5iWTc2xRAb/o/2C8vWxmPyV7g80+QKuvyVqtsjydb0+kheAlfcLbanB36Rw156gybQO9MyY2nPQT2VYON9RpzJMO8SSXojtruF6PjVEQUgj9VZX36e8/kmU54JyuKFRStJ3R+RDwMr/jbbQsCbATRSJLt/RgD+fwy9lmK++oYgHkOeWaIrluGLmxhOF3m35dcDTMcKpK3G87UQTOLvz+fz0BD8DeA8NoFrCVNvOlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Sources File Tree\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_sources_file_tree-8eef1c5b8517f1c23727ec7e47d0f913-a8ad9.png\\\"\\n        srcset=\\\"/static/chrome_sources_file_tree-8eef1c5b8517f1c23727ec7e47d0f913-cd822.png 163w,\\n/static/chrome_sources_file_tree-8eef1c5b8517f1c23727ec7e47d0f913-a8ad9.png 319w\\\"\\n        sizes=\\\"(max-width: 319px) 100vw, 319px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>And we can \\\"pretty-print\\\" the transpiled code to improve its readability.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 194px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 122.16494845360826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD/ElEQVQ4y6VV2W4jVRD1b/ETvPLEMzzxyE/wAQiNeAMhAUEiGV5mkslkPGOcxMR2e9/a3bbb7a0X9765D1XXsT3RaECCtsp1N51bVaeqbkHXdTiOi+12S9qB63lI0xRRHCMkHedAxPNdjijbIeT1OKF1mu92e8kysc9nC5PJBIZhYLFYYDgcwrIsyIoCXR7BlaqwKrcItBm80QDeeIjI2CC2LbiDLjxlBF+RaX8q9t1+BwVN02DbNjabDfr9vrBUlmUxjydjbF69gFN/gF0pw21JCKeqEPPmEtvqPRwhFZjFa5hvX6Mwm80E4Gq1QrPZhO/7+D/fE8BOpwOPYshWuq6LKIoQBoEY2xQK1j6dzVwHuzhCSprH/MVOSKEI9oAct/V6jVarhfl8jouLC1xdXaFSqWA0Gon1387OcFMswgkj+J0mjJsrbP+i+FomXAJPnATzd+rJQgbsdrvCCv6YKA7BYDBAr9fDarlEslzApeCHRFKgKvB6bfgTBUazjljXkHruhzFkl/kzTRO1Wg3VehWdXgems0UeOPBaD4imMiJ9BpfI8vtdRMQyExevlyfAJVkgSdIHpPg9C4vLMRZFFesHHfo7DXqJ0kh1saZL/5GUdrt9BNxRwub0W0+XWMkLrNUl5u0J5DcdaE0VK43ON3XQEfBfmuzguckekFnlimESDoB5Lk6SyzW8fHWJ35+f4/rNNWqtOgbyAN3eCDevTcpXExlViao4KJeWJ5Y5kTn4B1J4ziSx9QyepdnJr3zvAf0jSagUwwx+kD51mVkej8eintMsFaRwWbLk+W4fBtIMftAHLx79FpccAdnlu7s7AVSvSxjLClm1+++Vwiw3Gg2KJ4FvNHTGEnRjhjgNYXkGnMAmsbAl6etNzIwx3HAL2zdofyPGmqm8x/J6hYbUwMpcQDUGKPVfYGoM0ZtL+KPyI66b52hM7khf4LzyA3758xl+LT/DS+kMlVFRrP1c+u4EyEl9f38PwzTIUgmD/hCrxQp59nG3kyw5juM0euoy90Ku2S2NmYj5bIoJ1TVzl9QrSJWhCH1OgT+QckivA2lHQE4bzkUG9oLwZELgI/jpe/gkOyq9E8DH5QhoUN5tLAr8XAO49d++hfftN0ib1ffyL/93lqfTqUgVBjRcD+uvv4D95Wdwn58hpl7I6ZxSe8roEn5rkiR5Ihm9J+njHkuB3xKHXDU8H3bxCsann8D86nP4lOD8ADmPjdV61AFdchAuUw7T4YFjKRzekltieNppw6M+yORUac6JzvXNTYOzoEgNlte4rZXLZVGapVJJNGMGF4DcZbhL97mJEphPpMhUgmN6+XhNIc3CseaLWfgRU1UVHC4ec8my9Qz4N//pAjgLS2k/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Pretty Print Button\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_pretty_print-0ad11bac5c6217bb6e808a9d24419ef1-0e716.png\\\"\\n        srcset=\\\"/static/chrome_pretty_print-0ad11bac5c6217bb6e808a9d24419ef1-deede.png 163w,\\n/static/chrome_pretty_print-0ad11bac5c6217bb6e808a9d24419ef1-0e716.png 194w\\\"\\n        sizes=\\\"(max-width: 194px) 100vw, 194px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Now we finally see our transpiled code in all its glory! We'll want to look at both <code class=\\\"language-text\\\">index.js</code> and <code class=\\\"language-text\\\">spec.js</code> to get a complete picture of what's going wrong. Here's both of the transpiled files:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"use strict\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n        Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">defineProperty</span><span class=\\\"token punctuation\\\">(</span>exports<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"__esModule\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            value<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> sum <span class=\\\"token operator\\\">=</span> exports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">'use strict'</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./index'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index2 <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span>_index<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">obj</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> obj <span class=\\\"token operator\\\">&amp;&amp;</span> obj<span class=\\\"token punctuation\\\">.</span>__esModule <span class=\\\"token operator\\\">?</span> obj <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">:</span> obj\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">debugger</span> <span class=\\\"token punctuation\\\">;</span><span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n                _index2<span class=\\\"token punctuation\\\">.</span>default<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Without getting too much into the details of babel's output, we can get a feeling for how this code works:</p>\\n<ol>\\n<li>In <code class=\\\"language-text\\\">index.js</code>, Babel passes in an <code class=\\\"language-text\\\">exports</code> object, sets <code class=\\\"language-text\\\">exports.__esModule</code> to true, and sets <code class=\\\"language-text\\\">exports.sum</code> to our sum function.</li>\\n<li>In <code class=\\\"language-text\\\">spec.js</code>, Babel uses a <code class=\\\"language-text\\\">require</code> method to get the value of the <code class=\\\"language-text\\\">index.js</code> module, which we can assume to be the <code class=\\\"language-text\\\">exports</code> object in <code class=\\\"language-text\\\">index.js</code>.</li>\\n<li>The code sees that the imported object's <code class=\\\"language-text\\\">__esModule</code> property is true, so it sets <code class=\\\"language-text\\\">_index2.default</code> to the default export.</li>\\n<li>The <code class=\\\"language-text\\\">sum</code> invocation in our original code is replaced with <code class=\\\"language-text\\\">(0, _index2.default)</code>, which evaluates to <code class=\\\"language-text\\\">_index2.default</code>. (The reasons for this specific syntax are beyond the scope of this blog post.)</li>\\n</ol>\\n<p>Seems like we're getting somewhere! If <code class=\\\"language-text\\\">index.js</code> sets <code class=\\\"language-text\\\">exports.sum</code> to our sum function, then we would expect <code class=\\\"language-text\\\">spec.js</code> to use it like <code class=\\\"language-text\\\">_index2.sum</code>. Instead, it tries to use <code class=\\\"language-text\\\">_index2.default</code>, which explains our original error...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">_index2.default</code> isn't a function because it's undefined, as we saw when we looked in the <code class=\\\"language-text\\\">_index2</code> object in the Debugger Scope. But how can we fix our original code? We seem to be accessing the <code class=\\\"language-text\\\">sum</code> function in the wrong way, so let's check out how we're importing and exporting the function:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span></code></pre>\\n      </div>\\n<p>Ah-ha! We're exporting <code class=\\\"language-text\\\">sum</code> as a named variable and importing it as the default. To fix this error, we can either change the named export into a default export or change the default import into a named import. Let's do the former:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span></code></pre>\\n      </div>\\n<p>Now we run <code class=\\\"language-text\\\">npm t</code> once again, and we get...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">PASS  ./spec.js\\n sum\\n   ✓ correctly adds 1 and 1 (5ms)\\n\\nTest Suites: 1 passed, 1 total\\nTests:       1 passed, 1 total\\nSnapshots:   0 total\\nTime:        1.602s\\nRan all test suites.</code></pre>\\n      </div>\\n<p>Passing Tests = <em>Pure Bliss</em> :)</p>\\n<p>And now we can feel extra happy, because we debugged the error, we understand where it's coming from, and we'll be unfazed if we see it again.</p>\\n<p>The takeaway from this round of debugging is: do your best to <em>deeply</em> understand the errors you encounter. If you think you understand an error, but you're not sure, it can help to write down any questions that are floating around your head. Then you can methodically tackle each question and improve your debugging skills. This is a strategy that I'm learning myself, and I hope it proves useful to you.</p>\",\"frontmatter\":{\"title\":\"Digging into a Babel-Related Error in Jest\",\"date\":\"October 11, 2017\",\"draft\":null}}},\"pathContext\":{\"slug\":\"babel-error-in-jest\"}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---blog-babel-error-in-jest-9c2ce15b055ecc8d67fc.js","module.exports = {\"data\":{\"markdownRemark\":{\"html\":\"<p>Not so long ago, I decided to add some tests to a small program I wrote. I chose to use <a href=\\\"https://facebook.github.io/jest/\\\">jest</a>, a nice testing platform by facebook that I've enjoyed using in the past. This time, however, I had some trouble: I ran into a babel-related error with my very first test. I'd like to be a world-class debugger someday, so I figured I'd dig in and really try to understand the error.</p>\\n<p>This post describes how to set up a little app that reproduces the error, and next, how to debug the error using tools from the modern JavaScript toolbox.</p>\\n<h2>Reproducing the Error</h2>\\n<p>(If you'd like, you can skip this section and reproduce the error by cloning this <a href=\\\"https://github.com/nwshane/jest-babel-error\\\">repository</a>.)</p>\\n<p>In order to get jest to show us this babel-related error, we'll do the following things:</p>\\n<ol>\\n<li>Write a sum function that we will test.</li>\\n<li>Write a simple jest test for the sum function.</li>\\n<li>Create an npm <code class=\\\"language-text\\\">test</code> script to run our tests.</li>\\n<li>Install jest.</li>\\n<li>Configure babel to recognize ES2015 imports.</li>\\n</ol>\\n<p>Let's start out by creating that sum function.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>Simple enough. Now we want to test our sum function, because we're responsible devs, and that's what responsible devs do.</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>(If you saw the bug in this code, then good for you! If not, then that's fine—I didn't see it either, so I had to learn how to debug it.)</p>\\n<p>Two more steps until we can run our tests. First, we'll create a <code class=\\\"language-text\\\">package.json</code> file containing our <code class=\\\"language-text\\\">test</code> script, which will run jest. Run <code class=\\\"language-text\\\">npm init</code>, and answer the <code class=\\\"language-text\\\">test command</code> prompt with <code class=\\\"language-text\\\">jest</code> (you can use the defaults for everything else).</p>\\n<p>Finally, we install jest with <code class=\\\"language-text\\\">npm i jest</code>.</p>\\n<p>Hurray! We now run the test script with <code class=\\\"language-text\\\">npm t</code> (a shortcut for <code class=\\\"language-text\\\">npm test</code>, or <code class=\\\"language-text\\\">npm run test</code>), and we see...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">Test suite failed to run\\n\\nSyntaxError: Unexpected token import</code></pre>\\n      </div>\\n<p>Dang! It looks like jest doesn't understand the <a href=\\\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import\\\">ES2015 import</a> syntax. That's okay, we just need to install <a href=\\\"https://babeljs.io/\\\">babel</a> and the <a href=\\\"https://babeljs.io/docs/plugins/preset-es2015/\\\">ES2015 babel preset</a>, which jest will use to transform the import syntax into something it understands.</p>\\n<p>Jest's documentation on <a href=\\\"https://facebook.github.io/jest/docs/en/getting-started.html#using-babel\\\">configuring babel</a> is a bit complicated with a number of side notes. Long story short, jest comes with a library called <a href=\\\"https://github.com/facebook/jest/tree/master/packages/babel-jest\\\">babel-jest</a>, so all we have to do to make jest understand our <code class=\\\"language-text\\\">import</code> syntax is the following:</p>\\n<ol>\\n<li>Add a <code class=\\\"language-text\\\">.babelrc</code> file to our project:</li>\\n</ol>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-json\\\"><code class=\\\"language-json\\\"><span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token property\\\">\\\"presets\\\"</span><span class=\\\"token operator\\\">:</span> <span class=\\\"token punctuation\\\">[</span><span class=\\\"token string\\\">\\\"es2015\\\"</span><span class=\\\"token punctuation\\\">]</span>\\n<span class=\\\"token punctuation\\\">}</span></code></pre>\\n      </div>\\n<ol start=\\\"2\\\">\\n<li>Install the ES2015 preset: <code class=\\\"language-text\\\">npm i babel-preset-es2015</code></li>\\n</ol>\\n<p>With that done, babel should be good to go.</p>\\n<h2>Debugging our Babel-Related Error</h2>\\n<p>Running our tests again (<code class=\\\"language-text\\\">npm t</code>), we get a more cryptic error this time:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p>Hey, at least our test suite is running now!</p>\\n<p>If you don't have a lot of experience with babel, then this error will seem a bit strange. Where in the world did <code class=\\\"language-text\\\">_index2.default</code> come from? Who cares if it's not a function—I didn't write anything like that in my code!</p>\\n<p>Hold on a moment. Let's try to remember what babel is doing. Babel is a transpiler, so it's transforming your code into something that jest can understand. Does that mean it might be transforming variable names as well, and outputting things like <code class=\\\"language-text\\\">_index2.default</code>?</p>\\n<p>In order to answer that question, let's consult a handy section of the jest docs, aptly named, \\\"<a href=\\\"https://facebook.github.io/jest/docs/en/troubleshooting.html#tests-are-failing-and-you-don-t-know-why\\\">Tests are Failing and You Don't Know Why</a>\\\". The docs recommend we use a debugger, which seems like a great idea for getting more info!</p>\\n<p>Let's add a <code class=\\\"language-text\\\">debugger</code> line into our code, to tell our debugging tool to stop at that line:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span>\\n\\n<span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n  <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token keyword\\\">debugger</span>\\n    <span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span>\\n  <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span></code></pre>\\n      </div>\\n<p>Next, let's run our tests as recommended by the docs:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">node --inspect-brk node_modules/.bin/jest --runInBand</code></pre>\\n      </div>\\n<p>This gives us the following output:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">Debugger listening on ws://127.0.0.1:9229/cedc923a-cc9f-4531-a947-9c1ef7226bc8\\nFor help see https://nodejs.org/en/docs/inspector</code></pre>\\n      </div>\\n<p>Looking at the above link, we can see a bunch of different options for debugging our code. Let's use Chrome, since most of us will have it installed already.</p>\\n<ol>\\n<li>Navigate to <code class=\\\"language-text\\\">chrome://inspect/</code> in Chrome.</li>\\n<li>In the <code class=\\\"language-text\\\">Remote Target</code> section, you should see the script <code class=\\\"language-text\\\">node_modules/.bin/jest</code>. Click the <code class=\\\"language-text\\\">inspect</code> link below it.</li>\\n</ol>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 376px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 80.58510638297874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACU0lEQVQ4y31UyXbaQBDk/y/5gPxKbjnkFD9DiAxI1g4IaUZC+06le4QwOLb7vZY0W09Vd7UWbduiLEsURYG6blBVFcZxBFtV12q+LCs13/e9mr9cLp/6IkkSaNoGvr+HbdlY/9XocK0Oer6H5WqFl80GT8/PEHFyC/iZLfquQ5qmyLLsAQE90Q1AQ49h6BXqYRjAjHgff7Pz/APCssjhOA4sQlcQdbZxnAKaMbD2Mhz3LvaHA8Iogus6hNyH47o0Fv+lYNERwiQ5o2ma2+J4ReilgH7MIaIAQkok5zOEEJPTODgFiJPkSvZypUzweSMnn4NPN00bTjngy5oChgjCCDKOKUiokEoZK6ShmFCOM0LOSZZnFDRRN3PQ2cqyw9bO4AYtXuwSulvB8GqY+5rmatjHFl7QwDkUWOkpynpghEw5pkD9Q7W+quTdrndnxjmHMWmwVlXj8Vxtlyit1mts9Z2Sjut52O520OjbMC2lTS5knudKqyqHTJlzc6Y8siY52SwjtpwUIKRQ62EYqks5LaZlIaI3F7KkoNwYvKYCMiLWIE+yczAuEFtG33/WGiHUYZNMdroBwzBu8vpQ2B0X5RpQUVCtNh1IqwT2wUJMKPM8hWS5UIWZYlVXyvk8g5pdURYiurXbvVlSx9JeUt58bA0XfnCCS3I5EH2LmsF8fUUcS5KQVDKKKTWLrxqdjVVk+iUcOaIzdmi+f8MlOn1O+SOpPL7fpDGSXpufP9BpS7S/f6FbPWEIg8fWe4/obTzpbG7Fqb/vLqefwihC9JaB+Vre+w+5HNHzdWgUKwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Remote Target\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-beeed.png\\\"\\n        srcset=\\\"/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-a7bfb.png 163w,\\n/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-c740e.png 325w,\\n/static/chrome_remote_target-c3c45424dfaefd9b73f69e06708a1f97-beeed.png 376w\\\"\\n        sizes=\\\"(max-width: 376px) 100vw, 376px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<ol start=\\\"3\\\">\\n<li>Cool! Looks like a debugger! <code class=\\\"language-text\\\">--inspect-brk</code> pauses code execution at the first line of the script, so we've stopped at the first line of the jest script file. To get to our debugger line, let's press the play button.</li>\\n</ol>\\n<p>After a little wait, our <code class=\\\"language-text\\\">spec.js</code> file will open and you'll see our sum test containing the <code class=\\\"language-text\\\">debugger</code> line.</p>\\n<p><code class=\\\"language-text\\\">_index2.default</code> is still no where in sight, but that's because we're looking at the \\\"Source Map\\\" of our code—that is, the original code that we wrote. Chrome shows this to us in a couple places:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 79.39698492462311%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABxUlEQVQ4y6WUW2/TQBCF/f//C0/wAuKpQuKBxyJaqaRxbCe+xPauvb5n44/ZhFahTWgpIx3Zmt09M3M0M952u+WAfEupSrRWFGVBXpaoLKXaZlRtS9U0VEZQVWehtSbPc7wsy9isN0TLEJUr4iQnDmOyoqT49hXz6T3t/U/MzTVNFNB13Vm0ElQrhWeMIYkTqk2JKWtq3WCVwQ4Tky4YJVvsDsYBOQRmLtser65r1pKhH0Zcf78n+rFCL5YYkaEKA3opc1KaoR9pHOT+MFrsHnZ2PoHEnCyeqz9OUnS948tVwOePPje3qejRkqU1QZDiLzdsEkPdWEwr6PZCPj+D6exDhuuDqKYxEn1gGHomCbmzlq4XfbqWSaJftqMM8zwfCeM4pu97XjL34BIOCu5/a+iye+nBEcdsLhE+ZlhKz506H/5fa88IlfTP08O3ED6W/JTwNOJ/Z3ju0mvwJ6HT0DmmkV3oM0vq/0L215KpNPbuFhmJN2l5mBS3Jdxwu7k2w0AjG0Z9eEcj7dQ4vwR1Z41sHIdB7ozjeBZeURSkaUoURTJmgYzZkkQ2UCjT4/791YrFYkEYhvi+z1J87o3rXVeZ+57iFw7P2zQVU8hkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Source Map\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-bc8a5.png\\\"\\n        srcset=\\\"/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-9f60b.png 163w,\\n/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-a5b96.png 325w,\\n/static/chrome_source_map-977ee10b94867637f15ba3cbb4d13330-bc8a5.png 597w\\\"\\n        sizes=\\\"(max-width: 597px) 100vw, 597px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Generally, it's much nicer to look at the Source Map of some code than its transpiled version, which is why Chrome shows it to us. However, we're interested to see whether our transpiled code contains <code class=\\\"language-text\\\">_index2.default</code>, so we need to go beyond the source map.</p>\\n<p>First, let's look in the Scope section of the debugging window. Scope contains all the variables that are accessible where we paused our code with <code class=\\\"language-text\\\">debugger</code>, and notably it shows us variables from our <em>transpiled</em> code, which is what we want to see. Taking a look around, we open up the <code class=\\\"language-text\\\">Closure</code> object, and... there's <code class=\\\"language-text\\\">_index2</code>! Open that up, and we see a <code class=\\\"language-text\\\">sum</code> property, as well as an <code class=\\\"language-text\\\">__esModule</code> property, but no <code class=\\\"language-text\\\">default</code> property.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 88.04878048780488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACSklEQVQ4y51UaXPaQAz1//9D/QNt86EJKRCaEHzg2+tlfeID2/AqbdqZHEAPzbzRjL3SSk9PawipYIcl0lQgCEIkSQKlMkRRpL1t2/B9Hw8PKwiRoqpqFEWJsjwPQ6oSa6+lwzGiOKLEHFRCSom6rrF6WMKyTMzubumymL5VFFigouBzMIRYwTY/wbO+wHduEGxvEPu38OyvcK3PwBQDEIQUOEY4jeFVGFnmwXPv4Dn3sDffEHpzSPGEyF9CRCt0bYyhS3AgsB96cRWGUjkcZ4v5cgm5UxjHCft9g6ZpNZizsqrIV2/8JRiJkES8haf1E+aLBdbPz0R68Yvk4iL5F4eyo6pM09SJLJpoTFP+1yRvEqrdDlv3pWU/CDAMA7Xa/DcMbk9QVVvHRUPcTdOEw+GgE59OJxyPxzfgb9dg8KGqrCB9iUrWWmumZZEOFS4ZB14yI88zJHGMMIy0sFWmsNlsNK87SXRst7Adh8Rta0ii6HfCsxX2fY88z6GEQvAcIrYTLY1hGHX7fX9A23YkpT35VlPxOtmHCjmID6VRisRMkMkSKi/h0qAS2t2iyClR8/ct8wDYpuOEtmiRR5VGFmVIZQE/KlGU/Yeq2J1rXVfIxhMe6hFVUqORLfr2QIJ3SJ8WcStwusDZ+2oN5kuRuGMajJL5y43TCdN41FT0fUdcjrhmrD9eCCEEPw4Z8eXqTXE9DxlNfd/stRZfg4f3Hl3X6X+s5TAM6T0NePV2+PH4iNvZDIvlAvff5zoxV87T58N/Aq8cv52shJ/9XF926PUdqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Debugger Scope\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-6e092.png\\\"\\n        srcset=\\\"/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-ca167.png 163w,\\n/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-0737a.png 325w,\\n/static/chrome_debugger_scope-8d7fe9904055b6e733dcde9167c02ba1-6e092.png 410w\\\"\\n        sizes=\\\"(max-width: 410px) 100vw, 410px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>But where is <code class=\\\"language-text\\\">_index2</code> coming from? And where is <code class=\\\"language-text\\\">_index2.default</code> being called? Clearly we need to see the actual transpiled code, not just its representation in the debugger. We can select the transpiled files in the Sources file tree, as seen here:</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 319px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 91.22257053291534%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAACdElEQVQ4y5VTyXKjQAzl/49zn8vMYWq+Yg5zGi+xAdsYMItZDDY7BjvEy4vUCakklclClVBLrX6tJ6mlsiyx2+2QJAmyPEfTNMhJZ1mGNM2efCnvC18qdNs2pFNxlu2iKESctNvGkGUFw+EA2nJJgQfoug5FkXFzM8FCY19LMTLFDIVMpwqOxyM0bYHhaIzZTIVuGNjv95CqqhIHemGbpa5rIc2+gh/XkJ0DVKeF4jSY2i3caI+2oRgCqeuHM8xW4pRVVYVpmnTTDHEcY0mZTqdTTCYTGHSzqioYDP7BdR1Y1grj8UjsjUYjQXkvQB8SkA6Hg0DmG7gGnGUfwP5ec414zXu85tr2dWOMnqHI0PM8BEEIzw9hO2vMFkshxsrG9XrFVz6Jb+8Bg02E7S4Rjenu7nDbdbhcLk+grNnupfcLm9Zsi6aE4Qa7bUQ6QLxN3ryZD731vWYg8a/KE/x1TjCSM4K1Q3R1mERXmS2w1E2ocw03UxWLpYGV5cAwLWiPfpY5jdZc02nEdEiCxvmEFY3BbNMhTgv4QYCAso7iLSzbJTvEJopR1dysPTWCG9eIkemoLGmWU+Mq4ZfA3CnLtkrxZ3XGPL4gCn2sCCjLC5iWTc2xRAb/o/2C8vWxmPyV7g80+QKuvyVqtsjydb0+kheAlfcLbanB36Rw156gybQO9MyY2nPQT2VYON9RpzJMO8SSXojtruF6PjVEQUgj9VZX36e8/kmU54JyuKFRStJ3R+RDwMr/jbbQsCbATRSJLt/RgD+fwy9lmK++oYgHkOeWaIrluGLmxhOF3m35dcDTMcKpK3G87UQTOLvz+fz0BD8DeA8NoFrCVNvOlAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Sources File Tree\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_sources_file_tree-8eef1c5b8517f1c23727ec7e47d0f913-a8ad9.png\\\"\\n        srcset=\\\"/static/chrome_sources_file_tree-8eef1c5b8517f1c23727ec7e47d0f913-cd822.png 163w,\\n/static/chrome_sources_file_tree-8eef1c5b8517f1c23727ec7e47d0f913-a8ad9.png 319w\\\"\\n        sizes=\\\"(max-width: 319px) 100vw, 319px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>And we can \\\"pretty-print\\\" the transpiled code to improve its readability.</p>\\n<p>\\n  <span\\n    class=\\\"gatsby-resp-image-wrapper\\\"\\n    style=\\\"position: relative; display: block; ; max-width: 194px; margin-left: auto; margin-right: auto;\\\"\\n  >\\n    <span\\n      class=\\\"gatsby-resp-image-background-image\\\"\\n      style=\\\"padding-bottom: 122.16494845360826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD/ElEQVQ4y6VV2W4jVRD1b/ETvPLEMzzxyE/wAQiNeAMhAUEiGV5mkslkPGOcxMR2e9/a3bbb7a0X9765D1XXsT3RaECCtsp1N51bVaeqbkHXdTiOi+12S9qB63lI0xRRHCMkHedAxPNdjijbIeT1OKF1mu92e8kysc9nC5PJBIZhYLFYYDgcwrIsyIoCXR7BlaqwKrcItBm80QDeeIjI2CC2LbiDLjxlBF+RaX8q9t1+BwVN02DbNjabDfr9vrBUlmUxjydjbF69gFN/gF0pw21JCKeqEPPmEtvqPRwhFZjFa5hvX6Mwm80E4Gq1QrPZhO/7+D/fE8BOpwOPYshWuq6LKIoQBoEY2xQK1j6dzVwHuzhCSprH/MVOSKEI9oAct/V6jVarhfl8jouLC1xdXaFSqWA0Gon1387OcFMswgkj+J0mjJsrbP+i+FomXAJPnATzd+rJQgbsdrvCCv6YKA7BYDBAr9fDarlEslzApeCHRFKgKvB6bfgTBUazjljXkHruhzFkl/kzTRO1Wg3VehWdXgems0UeOPBaD4imMiJ9BpfI8vtdRMQyExevlyfAJVkgSdIHpPg9C4vLMRZFFesHHfo7DXqJ0kh1saZL/5GUdrt9BNxRwub0W0+XWMkLrNUl5u0J5DcdaE0VK43ON3XQEfBfmuzguckekFnlimESDoB5Lk6SyzW8fHWJ35+f4/rNNWqtOgbyAN3eCDevTcpXExlViao4KJeWJ5Y5kTn4B1J4ziSx9QyepdnJr3zvAf0jSagUwwx+kD51mVkej8eintMsFaRwWbLk+W4fBtIMftAHLx79FpccAdnlu7s7AVSvSxjLClm1+++Vwiw3Gg2KJ4FvNHTGEnRjhjgNYXkGnMAmsbAl6etNzIwx3HAL2zdofyPGmqm8x/J6hYbUwMpcQDUGKPVfYGoM0ZtL+KPyI66b52hM7khf4LzyA3758xl+LT/DS+kMlVFRrP1c+u4EyEl9f38PwzTIUgmD/hCrxQp59nG3kyw5juM0euoy90Ku2S2NmYj5bIoJ1TVzl9QrSJWhCH1OgT+QckivA2lHQE4bzkUG9oLwZELgI/jpe/gkOyq9E8DH5QhoUN5tLAr8XAO49d++hfftN0ib1ffyL/93lqfTqUgVBjRcD+uvv4D95Wdwn58hpl7I6ZxSe8roEn5rkiR5Ihm9J+njHkuB3xKHXDU8H3bxCsann8D86nP4lOD8ADmPjdV61AFdchAuUw7T4YFjKRzekltieNppw6M+yORUac6JzvXNTYOzoEgNlte4rZXLZVGapVJJNGMGF4DcZbhL97mJEphPpMhUgmN6+XhNIc3CseaLWfgRU1UVHC4ec8my9Qz4N//pAjgLS2k/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\\\"\\n    >\\n      <img\\n        class=\\\"gatsby-resp-image-image\\\"\\n        style=\\\"width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;\\\"\\n        alt=\\\"Chrome Pretty Print Button\\\"\\n        title=\\\"\\\"\\n        src=\\\"/static/chrome_pretty_print-0ad11bac5c6217bb6e808a9d24419ef1-0e716.png\\\"\\n        srcset=\\\"/static/chrome_pretty_print-0ad11bac5c6217bb6e808a9d24419ef1-deede.png 163w,\\n/static/chrome_pretty_print-0ad11bac5c6217bb6e808a9d24419ef1-0e716.png 194w\\\"\\n        sizes=\\\"(max-width: 194px) 100vw, 194px\\\"\\n      />\\n    </span>\\n  </span>\\n  </p>\\n<p>Now we finally see our transpiled code in all its glory! We'll want to look at both <code class=\\\"language-text\\\">index.js</code> and <code class=\\\"language-text\\\">spec.js</code> to get a complete picture of what's going wrong. Here's both of the transpiled files:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">\\\"use strict\\\"</span><span class=\\\"token punctuation\\\">;</span>\\n        Object<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">defineProperty</span><span class=\\\"token punctuation\\\">(</span>exports<span class=\\\"token punctuation\\\">,</span> <span class=\\\"token string\\\">\\\"__esModule\\\"</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token punctuation\\\">{</span>\\n            value<span class=\\\"token punctuation\\\">:</span> <span class=\\\"token boolean\\\">true</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> sum <span class=\\\"token operator\\\">=</span> exports<span class=\\\"token punctuation\\\">.</span><span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">sum</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n        <span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n\\n<span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">{</span>\\n    <span class=\\\"token string\\\">\\\"Object.&lt;anonymous>\\\"</span><span class=\\\"token punctuation\\\">:</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">module<span class=\\\"token punctuation\\\">,</span> exports<span class=\\\"token punctuation\\\">,</span> require<span class=\\\"token punctuation\\\">,</span> __dirname<span class=\\\"token punctuation\\\">,</span> __filename<span class=\\\"token punctuation\\\">,</span> global<span class=\\\"token punctuation\\\">,</span> jest</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n        <span class=\\\"token string\\\">'use strict'</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">require</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'./index'</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">var</span> _index2 <span class=\\\"token operator\\\">=</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span>_index<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token keyword\\\">function</span> <span class=\\\"token function\\\">_interopRequireDefault</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">obj</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token keyword\\\">return</span> obj <span class=\\\"token operator\\\">&amp;&amp;</span> obj<span class=\\\"token punctuation\\\">.</span>__esModule <span class=\\\"token operator\\\">?</span> obj <span class=\\\"token punctuation\\\">:</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">default</span><span class=\\\"token punctuation\\\">:</span> obj\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span>\\n\\n        <span class=\\\"token function\\\">describe</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'sum'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n            <span class=\\\"token function\\\">test</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token string\\\">'correctly adds 1 and 1'</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token keyword\\\">function</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token punctuation\\\">{</span>\\n                <span class=\\\"token keyword\\\">debugger</span> <span class=\\\"token punctuation\\\">;</span><span class=\\\"token function\\\">expect</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">0</span><span class=\\\"token punctuation\\\">,</span>\\n                _index2<span class=\\\"token punctuation\\\">.</span>default<span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">,</span> <span class=\\\"token number\\\">1</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">.</span><span class=\\\"token function\\\">toEqual</span><span class=\\\"token punctuation\\\">(</span><span class=\\\"token number\\\">2</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n            <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span>\\n        <span class=\\\"token comment\\\">//# sourceMappingURL=...</span>\\n    <span class=\\\"token punctuation\\\">}</span>\\n<span class=\\\"token punctuation\\\">}</span><span class=\\\"token punctuation\\\">)</span><span class=\\\"token punctuation\\\">;</span></code></pre>\\n      </div>\\n<p>Without getting too much into the details of babel's output, we can get a feeling for how this code works:</p>\\n<ol>\\n<li>In <code class=\\\"language-text\\\">index.js</code>, Babel passes in an <code class=\\\"language-text\\\">exports</code> object, sets <code class=\\\"language-text\\\">exports.__esModule</code> to true, and sets <code class=\\\"language-text\\\">exports.sum</code> to our sum function.</li>\\n<li>In <code class=\\\"language-text\\\">spec.js</code>, Babel uses a <code class=\\\"language-text\\\">require</code> method to get the value of the <code class=\\\"language-text\\\">index.js</code> module, which we can assume to be the <code class=\\\"language-text\\\">exports</code> object in <code class=\\\"language-text\\\">index.js</code>.</li>\\n<li>The code sees that the imported object's <code class=\\\"language-text\\\">__esModule</code> property is true, so it sets <code class=\\\"language-text\\\">_index2.default</code> to the default export.</li>\\n<li>The <code class=\\\"language-text\\\">sum</code> invocation in our original code is replaced with <code class=\\\"language-text\\\">(0, _index2.default)</code>, which evaluates to <code class=\\\"language-text\\\">_index2.default</code>. (The reasons for this specific syntax are beyond the scope of this blog post.)</li>\\n</ol>\\n<p>Seems like we're getting somewhere! If <code class=\\\"language-text\\\">index.js</code> sets <code class=\\\"language-text\\\">exports.sum</code> to our sum function, then we would expect <code class=\\\"language-text\\\">spec.js</code> to use it like <code class=\\\"language-text\\\">_index2.sum</code>. Instead, it tries to use <code class=\\\"language-text\\\">_index2.default</code>, which explains our original error...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">FAIL  ./spec.js\\n sum\\n   ✕ correctly adds 1 and 1 (4ms)\\n\\n ● sum › correctly adds 1 and 1\\n\\n   TypeError: (0 , _index2.default) is not a function</code></pre>\\n      </div>\\n<p><code class=\\\"language-text\\\">_index2.default</code> isn't a function because it's undefined, as we saw when we looked in the <code class=\\\"language-text\\\">_index2</code> object in the Debugger Scope. But how can we fix our original code? We seem to be accessing the <code class=\\\"language-text\\\">sum</code> function in the wrong way, so let's check out how we're importing and exporting the function:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">const</span> <span class=\\\"token function-variable function\\\">sum</span> <span class=\\\"token operator\\\">=</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span></code></pre>\\n      </div>\\n<p>Ah-ha! We're exporting <code class=\\\"language-text\\\">sum</code> as a named variable and importing it as the default. To fix this error, we can either change the named export into a default export or change the default import into a named import. Let's do the former:</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-javascript\\\"><code class=\\\"language-javascript\\\"><span class=\\\"token comment\\\">// index.js</span>\\n<span class=\\\"token keyword\\\">export</span> <span class=\\\"token keyword\\\">default</span> <span class=\\\"token punctuation\\\">(</span><span class=\\\"token parameter\\\">a<span class=\\\"token punctuation\\\">,</span> b</span><span class=\\\"token punctuation\\\">)</span> <span class=\\\"token operator\\\">=></span> <span class=\\\"token punctuation\\\">(</span>a <span class=\\\"token operator\\\">+</span> b<span class=\\\"token punctuation\\\">)</span>\\n\\n<span class=\\\"token comment\\\">// spec.js</span>\\n<span class=\\\"token keyword\\\">import</span> sum <span class=\\\"token keyword\\\">from</span> <span class=\\\"token string\\\">'./index'</span></code></pre>\\n      </div>\\n<p>Now we run <code class=\\\"language-text\\\">npm t</code> once again, and we get...</p>\\n<div class=\\\"gatsby-highlight\\\">\\n      <pre class=\\\"language-text\\\"><code class=\\\"language-text\\\">PASS  ./spec.js\\n sum\\n   ✓ correctly adds 1 and 1 (5ms)\\n\\nTest Suites: 1 passed, 1 total\\nTests:       1 passed, 1 total\\nSnapshots:   0 total\\nTime:        1.602s\\nRan all test suites.</code></pre>\\n      </div>\\n<p>Passing Tests = <em>Pure Bliss</em> :)</p>\\n<p>And now we can feel extra happy, because we debugged the error, we understand where it's coming from, and we'll be unfazed if we see it again.</p>\\n<p>The takeaway from this round of debugging is: do your best to <em>deeply</em> understand the errors you encounter. If you think you understand an error, but you're not sure, it can help to write down any questions that are floating around your head. Then you can methodically tackle each question and improve your debugging skills. This is a strategy that I'm learning myself, and I hope it proves useful to you.</p>\",\"frontmatter\":{\"title\":\"Digging into a Babel-Related Error in Jest\",\"date\":\"October 11, 2017\",\"draft\":null}}},\"pathContext\":{\"slug\":\"babel-error-in-jest\"}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/blog-babel-error-in-jest.json\n// module id = 494\n// module chunks = 1478269245095"],"sourceRoot":""}