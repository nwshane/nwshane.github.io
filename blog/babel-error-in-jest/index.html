<!DOCTYPE html>
 <html><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><link rel="preload" href="/component---src-templates-blog-post-js-8fac999e782d62c43ef2.js" as="script"/><link rel="preload" href="/path---blog-babel-error-in-jest-90feac1c110e20e38675.js" as="script"/><link rel="preload" href="/app-b0bb296211c59f8557ba.js" as="script"/><link rel="preload" href="/commons-9b9e2378c6c1ce2dd80d.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"231608221292675":"app-b0bb296211c59f8557ba.js","110308036455227":"component---src-templates-project-js-5ba2de4ba727aaaaf57d.js","67604419171931":"webfontloader-7e2893ef542a12a5c720.js","107818501498521":"component---src-templates-blog-post-js-8fac999e782d62c43ef2.js","35783957827783":"component---src-pages-index-js-4e820523335a3fa8d132.js","156897593687669":"component---src-pages-resume-js-8833cd57daf47dafde08.js","152176518627018":"component---src-pages-blog-index-js-8f91dfb167481c625613.js","202660965941462":"component---src-pages-projects-index-js-ab733981d04e3b461300.js","129355780045025":"path---projects-feradi-info-b80e5e28f6c07a0e63f2.js","274127355567122":"path---projects-atoms-7e487cce70b265208130.js","25809487285447":"path---projects-georgian-budget-dd35c322b565abf226ec.js","67578937172164":"path---projects-gogocode-c738d6cdc14a2193b17a.js","156033193079102":"path---projects-place-ge-scraper-0df42623f8d4ae9e0ddf.js","207127633759669":"path---projects-prisoners-watch-2ca8833ec81a216d20c1.js","80249059781645":"path---projects-scott-shane-net-26d7c8d276937de6a09b.js","28946498874999":"path---projects-sunclock-54b41ec4274c91ff3a42.js","262131366328317":"path---blog-why-im-starting-a-blog-4aa4f7e5cdf00afd9dc2.js","33759698319820":"path---blog-squashing-gatsby-webpack-d-3-bug-416672ae84da37bb9647.js","1478269245095":"path---blog-babel-error-in-jest-90feac1c110e20e38675.js","20942050224866":"path---blog-lets-define-undefined-6270af0b4d6178647c73.js","22183059091959":"path---blog-the-sun-clock-starts-ticking-cba3d4327da6520bee3e.js","142629428675168":"path---index-1db04e5021b40904aca6.js","218357007423260":"path---resume-1db04e5021b40904aca6.js","49683490770531":"path---blog-7cdabe3a0b1e003d5937.js","97786326051841":"path---projects-af6c9bf05726ba89b16a.js"}
            //]]>
            </script><style type="text/css" data-styled-components="hUudAu gZNoDN iLergl" data-styled-components-is-local="true">/* sc-component-id: sc-bdVaJa */

.hUudAu{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:space-between;-webkit-justify-content:space-between;-ms-flex-pack:space-between;justify-content:space-between;max-width:400px;margin-left:auto;padding:0;}
/* sc-component-id: sc-bwzfXH */

.gZNoDN{list-style-type:none;}
/* sc-component-id: sc-htpNat */

.iLergl{font-size:calc(1.6rem + 0.5vw);font-family:"Patua One",sans-serif;color:#67A5C6;padding-bottom:2px;display:inline-block;}
</style><style type="text/css" data-styled-components="" data-styled-components-is-local="false">/* sc-component-id: sc-global-3362111964 */
html{font-size:10px;font-family:Lato,sans-serif;}a{text-decoration:none;color:#FF7813;}a:hover{-webkit-filter:brightness(70%);filter:brightness(70%);}
</style><style type="text/css" data-styled-components="gFcnnP evxZmb fVosuG IoWhP ljLtZP khaUvE bnEtxp ffIhQc fFKesK ftCPeV hvyBjO" data-styled-components-is-local="true">/* sc-component-id: sc-bxivhb */

.fVosuG{max-width:calc(300px + 50%);margin:0 auto;}
/* sc-component-id: sc-ifAKCX */

.evxZmb{padding:0 20px;font-size:2rem;color:#514d54;-webkit-letter-spacing:.3px;-moz-letter-spacing:.3px;-ms-letter-spacing:.3px;letter-spacing:.3px;}.evxZmb p{line-height:1.5;}
/* sc-component-id: sc-EHOje */

.IoWhP{max-width:calc(300px + 50%);margin:0 auto;}
/* sc-component-id: sc-iwsKbI */

.ffIhQc{margin-right:0.2em;}.ffIhQc svg{-webkit-fill:#FF7813;fill:#FF7813;max-width:0.9em;max-height:0.9em;}
/* sc-component-id: sc-dxgOiQ */

.gFcnnP.gFcnnP{max-width:75rem;}
/* sc-component-id: sc-ckVGcZ */

.ftCPeV{min-height:80px;border-top:10px solid #67A5C6;}
/* sc-component-id: sc-jKJlTe */

.hvyBjO{display:inline-block;padding:0;border:0;margin:0;width:0.85em;height:0.85em;background:no-repeat center url('data:image/svg+xml;utf8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20viewBox%3D%220%200%2012%2015%22%3E%3Crect%20x%3D%220%22%20y%3D%220%22%20width%3D%2212%22%20height%3D%2210%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%221%22%20y%3D%221%22%20width%3D%2210%22%20height%3D%228%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%222%22%20width%3D%228%22%20height%3D%226%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%2361ae24%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%2361ae24%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%223%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%2361ae24%22%3E%3C%2Frect%3E%3Crect%20x%3D%223%22%20y%3D%225%22%20width%3D%222%22%20height%3D%221%22%20fill%3D%22%2361ae24%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%225%22%20width%3D%222%22%20height%3D%221%22%20fill%3D%22%2361ae24%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%229%22%20width%3D%224%22%20height%3D%223%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%221%22%20y%3D%2211%22%20width%3D%2210%22%20height%3D%224%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%220%22%20y%3D%2212%22%20width%3D%2212%22%20height%3D%223%22%20fill%3D%22%23000%22%3E%3C%2Frect%3E%3Crect%20x%3D%222%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%223%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%224%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%225%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%226%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%227%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%228%22%20y%3D%2213%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3Crect%20x%3D%229%22%20y%3D%2212%22%20width%3D%221%22%20height%3D%221%22%20fill%3D%22%23fff%22%3E%3C%2Frect%3E%3C%2Fsvg%3E');}
/* sc-component-id: sc-eNQAEJ */

.ljLtZP{margin-top:50px;}
/* sc-component-id: sc-hMqMXs */

.khaUvE{margin-bottom:50px;}
/* sc-component-id: sc-kEYyzF */

.bnEtxp{margin-bottom:10px;font-size:3.2rem;}@media (min-width:600px){.bnEtxp{font-size:4rem;}}
/* sc-component-id: sc-kkGfuU */

.fFKesK{line-height:1.2;}.fFKesK ol,.fFKesK ul{margin:40px 0;}.fFKesK ol li,.fFKesK ul li{margin-bottom:15px;}.fFKesK h2{margin-top:50px;margin-bottom:30px;font-size:2.5rem;}@media (min-width:600px){.fFKesK h2{font-size:3rem;}}.fFKesK img{display:block;margin:0 auto;max-width:100%;}.fFKesK a[href*="footnote"]{font-size:0.75em;vertical-align:top;}
</style><title data-react-helmet="true">Digging into a Babel-Related Error in Jest | NathanShane.me</title><meta data-react-helmet="true" property="og:site_name" content="NathanShane.me"/><meta data-react-helmet="true" property="og:description" content="Nathan Shane&#x27;s portfolio and blog"/><meta data-react-helmet="true" property="og:type" content="website"/><meta data-react-helmet="true" property="og:title" content="Digging into a Babel-Related Error in Jest"/><link rel="alternate" type="application/rss+xml" title="" href="/blog/rss.xml"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-9b9e2378c6c1ce2dd80d.js","/app-b0bb296211c59f8557ba.js","/path---blog-babel-error-in-jest-90feac1c110e20e38675.js","/component---src-templates-blog-post-js-8fac999e782d62c43ef2.js"
])
  </script><style id="gatsby-inlined-css">/*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,footer,header,nav,section{display:block}h1{font-size:2em;margin:.67em 0}figcaption,figure,main{display:block}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent;-webkit-text-decoration-skip:objects}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}dfn{font-style:italic}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}audio,video{display:inline-block}audio:not([controls]){display:none;height:0}img{border-style:none}svg:not(:root){overflow:hidden}button,input,optgroup,select,textarea{font-family:sans-serif;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{display:inline-block;vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details,menu{display:block}summary{display:list-item}canvas{display:inline-block}[hidden],template{display:none}.gatsby-highlight-code-line{background-color:#feb;display:block;margin-right:-1em;margin-left:-1em;padding-right:1em;padding-left:.75em;border-left:.25em solid #f99}.gatsby-highlight{background-color:#fdf6e3;border-radius:.3em;margin:.5em 0;padding:1em;overflow:auto}.gatsby-highlight pre[class*=language-]{background-color:transparent;margin:0;padding:0;overflow:visible;overflow:initial;float:left;min-width:100%}code[class*=language-],pre[class*=language-]{color:#000;background:none;text-shadow:0 1px #fff;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}code[class*=language-]::-moz-selection,code[class*=language-] ::-moz-selection,pre[class*=language-]::-moz-selection,pre[class*=language-] ::-moz-selection{text-shadow:none;background:#b3d4fc}code[class*=language-]::selection,code[class*=language-] ::selection,pre[class*=language-]::selection,pre[class*=language-] ::selection{text-shadow:none;background:#b3d4fc}@media print{code[class*=language-],pre[class*=language-]{text-shadow:none}}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto}:not(pre)>code[class*=language-],pre[class*=language-]{background:#f5f2f0}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#999}.namespace{opacity:.7}.token.boolean,.token.constant,.token.deleted,.token.number,.token.property,.token.symbol,.token.tag{color:#905}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#690}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url{color:#a67f59;background:hsla(0,0%,100%,.5)}.token.atrule,.token.attr-value,.token.keyword{color:#07a}.token.function{color:#dd4a68}.token.important,.token.regex,.token.variable{color:#e90}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}</style></head><body><div id="___gatsby"><div data-reactroot="" data-reactid="1" data-react-checksum="440940619"><div class="sc-ifAKCX evxZmb" data-reactid="2"><nav class="sc-bxivhb fVosuG" data-reactid="3"><ul class="sc-bdVaJa hUudAu" data-reactid="4"><li class="sc-bwzfXH gZNoDN" data-reactid="5"><a class="sc-htpNat iLergl" href="/" data-reactid="6">Home</a></li><li class="sc-bwzfXH gZNoDN" data-reactid="7"><a class="sc-htpNat iLergl" href="/projects" data-reactid="8">Projects</a></li><li class="sc-bwzfXH gZNoDN" data-reactid="9"><a class="sc-htpNat iLergl" style="border-bottom:3px solid currentColor;" href="/blog" data-reactid="10">Blog</a></li></ul></nav><!-- react-empty: 11 --><div class="sc-dxgOiQ gFcnnP sc-EHOje IoWhP" data-reactid="12"><!-- react-empty: 13 --><article class="sc-eNQAEJ ljLtZP" data-reactid="14"><section class="sc-hMqMXs khaUvE" data-reactid="15"><h1 class="sc-kEYyzF bnEtxp" data-reactid="16">Digging into a Babel-Related Error in Jest</h1><span data-reactid="17"><span class="sc-iwsKbI ffIhQc" data-reactid="18"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon-responsive"><path d="M9 11H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V9h14v11z"></path><path d="M0 0h24v24H0z" fill="none"></path></svg></span><span data-reactid="19">October 11, 2017</span></span></section><main class="sc-kkGfuU fFKesK" data-reactid="20"><p>Not so long ago, I decided to add some tests to a small program I wrote. I chose to use <a href="https://facebook.github.io/jest/">jest</a>, a nice testing platform by facebook that I've enjoyed using in the past. This time, however, I had some trouble: I ran into a babel-related error with my very first test. I'd like to be a world-class debugger someday, so I figured I'd dig in and really try to understand the error.</p>
<p>This post describes how to set up a little app that reproduces the error, and next, how to debug the error using tools from the modern JavaScript toolbox.</p>
<h2>Reproducing the Error</h2>
<p>(If you'd like, you can skip this section and reproduce the error by cloning this <a href="https://github.com/nwshane/jest-babel-error">repository</a>.)</p>
<p>In order to get jest to show us this babel-related error, we'll do the following things:</p>
<ol>
<li>Write a sum function that we will test.</li>
<li>Write a simple jest test for the sum function.</li>
<li>Create an npm <code>test</code> script to run our tests.</li>
<li>Install jest.</li>
<li>Configure babel to recognize ES2015 imports.</li>
</ol>
<p>Let's start out by creating that sum function.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>
</code></pre>
      </div>
<p>Simple enough. Now we want to test our sum function, because we're responsible devs, and that's what responsible devs do.</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// spec.js</span>
<span class="token keyword">import</span> sum <span class="token keyword">from</span> <span class="token string">'./index'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'sum'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'correctly adds 1 and 1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>(If you saw the bug in this code, then good for you! If not, then that's fine—I didn't see it either, so I had to learn how to debug it.)</p>
<p>Two more steps until we can run our tests. First, we'll create a <code>package.json</code> file containing our <code>test</code> script, which will run jest. Run <code>npm init</code>, and answer the <code>test command</code> prompt with <code>jest</code> (you can use the defaults for everything else).</p>
<p>Finally, we install jest with <code>npm i jest</code>.</p>
<p>Hurray! We now run the test script with <code>npm t</code> (a shortcut for <code>npm test</code>, or <code>npm run test</code>), and we see...</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>Test suite failed to run

SyntaxError: Unexpected token import</code></pre>
      </div>
<p>Dang! It looks like jest doesn't understand the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Statements/import">ES2015 import</a> syntax. That's okay, we just need to install <a href="https://babeljs.io/">babel</a> and the <a href="https://babeljs.io/docs/plugins/preset-es2015/">ES2015 babel preset</a>, which jest will use to transform the import syntax into something it understands.</p>
<p>Jest's documentation on <a href="https://facebook.github.io/jest/docs/en/getting-started.html#using-babel">configuring babel</a> is a bit complicated with a number of side notes. Long story short, jest comes with a library called <a href="https://github.com/facebook/jest/tree/master/packages/babel-jest">babel-jest</a>, so all we have to do to make jest understand our <code>import</code> syntax is the following:</p>
<ol>
<li>Add a <code>.babelrc</code> file to our project:</li>
</ol>
<div class="gatsby-highlight">
      <pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">"presets"</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"es2015"</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre>
      </div>
<ol start="2">
<li>Install the ES2015 preset: <code>npm i babel-preset-es2015</code></li>
</ol>
<p>With that done, babel should be good to go.</p>
<h2>Debugging our Babel-Related Error</h2>
<p>Running our tests again (<code>npm t</code>), we get a more cryptic error this time:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>FAIL  ./spec.js
 sum
   ✕ correctly adds 1 and 1 (4ms)

 ● sum › correctly adds 1 and 1

   TypeError: (0 , _index2.default) is not a function</code></pre>
      </div>
<p>Hey, at least our test suite is running now!</p>
<p>If you don't have a lot of experience with babel, then this error will seem a bit strange. Where in the world did <code>_index2.default</code> come from? Who cares if it's not a function—I didn't write anything like that in my code!</p>
<p>Hold on a moment. Let's try to remember what babel is doing. Babel is a transpiler, so it's transforming your code into something that jest can understand. Does that mean it might be transforming variable names as well, and outputting things like <code>_index2.default</code>?</p>
<p>In order to answer that question, let's consult a handy section of the jest docs, aptly named, "<a href="https://facebook.github.io/jest/docs/en/troubleshooting.html#tests-are-failing-and-you-don-t-know-why">Tests are Failing and You Don't Know Why</a>". The docs recommend we use a debugger, which seems like a great idea for getting more info!</p>
<p>Let's add a <code>debugger</code> line into our code, to tell our debugging tool to stop at that line:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token keyword">import</span> sum <span class="token keyword">from</span> <span class="token string">'./index'</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'sum'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'correctly adds 1 and 1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">debugger</span>
    <span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre>
      </div>
<p>Next, let's run our tests as recommended by the docs:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>node --inspect-brk node_modules/.bin/jest --runInBand</code></pre>
      </div>
<p>This gives us the following output:</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>Debugger listening on ws://127.0.0.1:9229/cedc923a-cc9f-4531-a947-9c1ef7226bc8
For help see https://nodejs.org/en/docs/inspector</code></pre>
      </div>
<p>Looking at the above link, we can see a bunch of different options for debugging our code. Let's use Chrome, since most of us will have it installed already.</p>
<ol>
<li>Navigate to <code>chrome://inspect/</code> in Chrome.</li>
<li>In the <code>Remote Target</code> section, you should see the script <code>node_modules/.bin/jest</code>. Click the <code>inspect</code> link below it.</li>
</ol>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 376px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 80.58510638297874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAACMUlEQVQ4y5VUyXLaQBDVr+cHcs85X5GcXIkPYSvAQQJkgdDCJgvtAu0v3UPAYHAq7qqunuoZ9bzX/UZSWZao6wZFUaCqauEnq+saBe2XVYWmac7O9nZ9Msl1XfT7A6hTFTNNo/UQ7s4Tm34QoNVuoz8Yot3toD/8fVX4nkunyheX4DXXfNilJI4gywoURYHn+VcF87LBt2kFZTKGYRjQFwZMitpshqmqUtTgEYtLk/I8RxCESJL4LkI3bbDf769QcG8r6ivHpqnFDM4FORnHMbIsuylYVA26VkXIdBimCd0wYVom5vqcooUFoZ1Mx3Dc3WvBw+EAx3GwFb4VaC5NnkeY2ylGWgSF1k/PEZ6NBFMjphhDsxNoZgx9mWCghkeEDLm5MxXOlVV9pMrniF5T1xf06zNtsSaXWH+bzRpJmt4UzIscYRSB+8zIuW+e51G+ELrNKP/WpIwor9ZrQZs1KahvNwJBTIPq9np4kmXSImmVpmtRD1vdHh5+PorvWBkBTZq/TQmU9K8XUBLCKIqxp0vjJEEQhgKp5/t4zwRCRse+oxfCg3lxXohSSf0qMRpP0Op0YNBUR8qYENqkv/n7BfktR9Snw13ZFHhQv2Np27CXK6xWy6N8SEa2bcGi/IKkFAa+6C3Tl7jRzJ3lc2/KfupD1nz0FQf2lvRK57IwELplEBzFT4SGxOAk/KfVf3sbf/6E9OsXFMpQSOiGMj5oQocV/fIIZd5+RP7rB0pdO+//AfU20R51RfaeAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Chrome Remote Target"
        title=""
        src="/static/c3c45424dfaefd9b73f69e06708a1f97-355f8.png"
        srcset="/static/c3c45424dfaefd9b73f69e06708a1f97-2d9b1.png 163w,
/static/c3c45424dfaefd9b73f69e06708a1f97-17d51.png 325w,
/static/c3c45424dfaefd9b73f69e06708a1f97-355f8.png 376w"
        sizes="(max-width: 376px) 100vw, 376px"
      />
    </span>
  </span>
  </p>
<ol start="3">
<li>Cool! Looks like a debugger! <code>--inspect-brk</code> pauses code execution at the first line of the script, so we've stopped at the first line of the jest script file. To get to our debugger line, let's press the play button.</li>
</ol>
<p>After a little wait, our <code>spec.js</code> file will open and you'll see our sum test containing the <code>debugger</code> line.</p>
<p><code>_index2.default</code> is still no where in sight, but that's because we're looking at the "Source Map" of our code—that is, the original code that we wrote. Chrome shows this to us in a couple places:</p>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 597px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 79.39698492462311%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAAAsSAAALEgHS3X78AAABR0lEQVQ4y+2Uy2rDMBBF/f+f0VWhi5JFoR/RRSkNJo5rx684tuTYliXHD9m3Hi1CFyEEmu564cJoJI6G0SCrKAqQq6pCXddomgZSSrOmmHK3mjgWYwxpmiIMQ3DOkec54ihGlmVg2w3E6hHK/kSz/oDYrKGWS5RSF12WJSwhhIHIvcDQdGDshK46YZAdhqpEl6WY5xmkeRwwTxrXZIBJksBxHNi2Df61hXRsVFGIemtDFRzdIV0ukKaKXgn0fX8dGEYJajXj9cXD6tnF2/sBGe+wzxT8iMMLGYJ46ZOczLlrNkDq4fF4RNv2OHUjxpGsofVkYqqI1rfo3MO2bXEPGSC9zr30D/wD4MTz+wI1O2D03d8Baai11mePokL79AC9DPXP/C22qDoa7CAIEEURfN9HHMfYU+x5Ju+6Lna7nYlpn87T13bJ3+wn3Um7PiHuAAAAAElFTkSuQmCC'); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Chrome Source Map"
        title=""
        src="/static/977ee10b94867637f15ba3cbb4d13330-f636d.png"
        srcset="/static/977ee10b94867637f15ba3cbb4d13330-1783f.png 163w,
/static/977ee10b94867637f15ba3cbb4d13330-7ad53.png 325w,
/static/977ee10b94867637f15ba3cbb4d13330-f636d.png 597w"
        sizes="(max-width: 597px) 100vw, 597px"
      />
    </span>
  </span>
  </p>
<p>Generally, it's much nicer to look at the Source Map of some code than its transpiled version, which is why Chrome shows it to us. However, we're interested to see whether our transpiled code contains <code>_index2.default</code>, so we need to go beyond the source map.</p>
<p>First, let's look in the Scope section of the debugging window. Scope contains all the variables that are accessible where we paused our code with <code>debugger</code>, and notably it shows us variables from our <em>transpiled</em> code, which is what we want to see. Taking a look around, we open up the <code>Closure</code> object, and... there's <code>_index2</code>! Open that up, and we see a <code>sum</code> property, as well as an <code>__esModule</code> property, but no <code>default</code> property.</p>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 410px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 88.04878048780488%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAABxElEQVQ4y6VU2ZKbMBDk/z9pH1KVl00cs3G2NjY2iMMcQlziNiwF7kjaysO++FhPVdcISmqGnh5pnHMErILMjDEkSYKqqhDHscpRFKm1YRhqT13XF6EVRYGXA0cYhnAcRxHIgzKXZYntdgvXdbFarZBl2XXCJNnBPDyBGN8QOD8RuM9Iot/w3R9wzO9YpgiY6c3Q+i5FXTooc4KE7pDGBsrCRpGZ4LmF94FhGm+HJvXZ7/dYv+hwvSPatn0IWhhS2LYtRN9hres4mOZVnS43hX90VDZHii7zQ4SSxPNcbF5fQUSlXdc9BGUbxmJY5IPs0dCmaVJ+K0JBfEwRBgFMy4LvB18jlBVKE3uiw0eBXDzLrts2QZZmIIQI2DBFsyyLgCXpbRWe6h7UjMGcFMMwYF6WTxvneVb5fD5fJ5TBQgZGGOqqFVUUykrSl3mWo+/7+zT8/+X3XlQbNmjiFl3WCxtVoKwBL4f7CXnBcRIHJXo+iN8e4QgdPc8HpfHthPKKyvNCIEeRcvVymRfM0/xJu0sxDCdkgiNNU2hN06jpoGJapMnHcbwbcoblXRqJK1CjlOLt7xtWax2/9DU2mz84+v6XR+8fFDBg9k61GfIAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Chrome Debugger Scope"
        title=""
        src="/static/8d7fe9904055b6e733dcde9167c02ba1-187b0.png"
        srcset="/static/8d7fe9904055b6e733dcde9167c02ba1-855d2.png 163w,
/static/8d7fe9904055b6e733dcde9167c02ba1-07b9d.png 325w,
/static/8d7fe9904055b6e733dcde9167c02ba1-187b0.png 410w"
        sizes="(max-width: 410px) 100vw, 410px"
      />
    </span>
  </span>
  </p>
<p>But where is <code>_index2</code> coming from? And where is <code>_index2.default</code> being called? Clearly we need to see the actual transpiled code, not just its representation in the debugger. We can select the transpiled files in the Sources file tree, as seen here:</p>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 319px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 91.22257053291534%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAAsSAAALEgHS3X78AAAClklEQVQ4y5VUyXLaQBDV//9BviC3VKpyzMmV2GWbVYCxMEhIILQhoRVsSYiX7rblxM4Be6qaGXp6Xr/epGRpit1uJ5JlGfI8R5LESEnfSlEUoovjGDnZZNlfHd9nont+qziOg/F4hM7tDe7uNTHU9QUGgx66vR4md1MyLGi/x8WvK1xeXuO2O0Cc5pg/aGLT6/ehqqqAK+w1iiK0OzONSMIwFEniCOZmh44WQ9UzDBcZurMEmrlDsA2RJomwY7CEzgoDjEYjGIYBTdPgeR4MXcdkMhav0+kUs5mGITFeWUu6m2M8GmLCUXU6cF1XQm3DVhiVFSxxnJCXlDxvRcIwejHOhQGfOSVpmiF5yR3/3+/3r6Js+XEQiNgbF36whW6YmC8MWGsbVVXjM0thVNu24Ww22DieMCuKPeq6RlmWOB6Pbx6cTqc38l6n+L4Py7KwIjYP84WwZJDWmFfTNDgcHv8D51WW1VuG/JNSjowUcPMTwsAXpo7rwVytafexNFciprWG7bhyt7I34twiG07PeuPQOxcKM+HE9vUQN+YjNGONbp+qONVwP5vLuTccYWEsJaeu58P3A9oDyfeOCmmYloB5pFdaqnmaYLY9wSKmGZ3DaEdhHqTXWuOqPl8g5TWxTQnP/I7AHWE2X0IdT8QzTwnnjsE4l++LwsL6pnkpSgvY1AcUzjeUuQ4viCgkT1gm1HO8jsdGHrZVPcuwOT4hd34gC4dUDJcKYEnSuTDT+5mE/G+LnAckhun6KwGqVBAaL/oocDUzmaICT0/lJwGJYeH/xCE16OOQPn+qCOh9U3+4KE29R7L8gtC+wHVHxUDl4ujSOr+vbqRF2ib/EMPTqUH96ONYpShpfquqkvHjWeZw2yk5x/IPoOJakxBOg3IAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Chrome Sources File Tree"
        title=""
        src="/static/8eef1c5b8517f1c23727ec7e47d0f913-a9fb3.png"
        srcset="/static/8eef1c5b8517f1c23727ec7e47d0f913-a16ad.png 163w,
/static/8eef1c5b8517f1c23727ec7e47d0f913-a9fb3.png 319w"
        sizes="(max-width: 319px) 100vw, 319px"
      />
    </span>
  </span>
  </p>
<p>And we can "pretty-print" the transpiled code to improve its readability.</p>
<p>
  <span
    class="gatsby-resp-image-wrapper"
    style="position: relative; display: block; ; max-width: 194px; margin-left: auto; margin-right: auto;"
  >
    <span
      class="gatsby-resp-image-background-image"
      style="padding-bottom: 122.16494845360826%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAYCAYAAAD6S912AAAACXBIWXMAAAsSAAALEgHS3X78AAAD10lEQVQ4y6VVy24iVxDlF/MB2UVZZpd1fmAWWSdSFok0i1HGI1mOEieWDQyYGGPej27ANK9+AP0Emm7obk6qLgLbmljK40qle+teOFSdU1WkdF2H4zgn8zwPm80G/noNf7WC7/vCF3d0fu4/v98EgTinVFWFbdtYLBZQFAWu60LVdBjjEfxGBV6tjGA8RDAhvychNDQk263wNyMFoTZFMB0L8x97T4Dz+RyyLIsIR6MRdPJjx4ZTvMWyURX7Smoj1FUB4j0Uxf2KzO/JcPIZOHf5l4DtdluE/X/WC8BWq3VIme7Y53uXeJ3PZtA1Fcz3ivzYc7GzLZHmznWAJAH2e6ynzktASZLEnslkUKvVBKfsd+UuPmazuC0UMCM/MhdYU5pepSTAV0FImDGsjnUAZHVnFEW1SpyQslEUibsCAZTLZTSbDbSIDlMZYNWViLsa1t0OvHIRm8cuZiTcut9FOBk+AXIkjUZDlACvgMpA7nYhdTrotbuUso7AtUlxBf6gR2pT+lKHzn1s1TG2izlWcudTDhlwT3wc187YYPFxAvNehVkzMC8ZUNNjeJILYzbH7u9EOabM6R0jZNCEyLZ0E72yjGFrgFFLQStTRTvXwHw4RaWk0+fjE5hlhq+nfFzGzED+z1uyPB6qZXQoLYWKeraYknBrDBUSKdphYQZoNqzXAVkcrkt1qopS2lJ3sMVxfLIoSoSAnE0UJ9jtkicOTdMUHcKdwqAMyDTwDy2X3itlvP/kfIqQizaTzYgzRzYcjqio3f/WKQzCw6HT7sDxCNyaQDG6UPQe4iSCZo9hrWZwfeoc38LYfERHrdL9CObSwGKpw6T3qaU8AfJeLN4ToI2+1sadfINSPwvDmeDnwve4aZ7jYZBDXvodf9Q/4F3hO5zd/YDz0k+oKLe4pvcfs98ipWkaLMuibmiiXq8L8H6vD3WiYaHNic/g36V8BBwMBmJ88TCY0iyc0TAwSZwliRPmrhDKTUF7EkdEQyyo4P5N9snBqGb3+2cqs7oelceKJvVpcUudv8Pml/eIhv2DluKL+1dNAHKEFpUNl45LEe/qDwivf0Xw4a04nxaPqX80DwnQodQsTvPrL+F88RmW17/BJ39LHwppUGzJQh79tD+3Y8GHYSgsxcXLkan8Z3VfgP3V5zDffIM1/Y9w47uWeSorpoZBuPCPAPzdQ/EvRTMIwEqlAhZHqlbgUJ9Wi0Xc5XJI39zg8vJSvLNoFxcXSKfTyNHb1dWVmJf5fB5nZ2cCdE38p/jAXcKpmxTBkiKwXU+c+Y0jY2Oe2T/e8c7R8T0HxaJyhH8BIhYBFtf80yUAAAAASUVORK5CYII='); background-size: cover; display: block;"
    >
      <img
        class="gatsby-resp-image-image"
        style="width: 100%; height: 100%; margin: 0; vertical-align: middle; position: absolute; top: 0; left: 0; box-shadow: inset 0px 0px 0px 400px white;"
        alt="Chrome Pretty Print Button"
        title=""
        src="/static/0ad11bac5c6217bb6e808a9d24419ef1-551fb.png"
        srcset="/static/0ad11bac5c6217bb6e808a9d24419ef1-f958f.png 163w,
/static/0ad11bac5c6217bb6e808a9d24419ef1-551fb.png 194w"
        sizes="(max-width: 194px) 100vw, 194px"
      />
    </span>
  </span>
  </p>
<p>Now we finally see our transpiled code in all its glory! We'll want to look at both <code>index.js</code> and <code>spec.js</code> to get a complete picture of what's going wrong. Here's both of the transpiled files:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">"Object.&lt;anonymous>"</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> __dirname<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> global<span class="token punctuation">,</span> jest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">"use strict"</span><span class="token punctuation">;</span>
        Object<span class="token punctuation">.</span><span class="token function">defineProperty</span><span class="token punctuation">(</span>exports<span class="token punctuation">,</span> <span class="token string">"__esModule"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
            value<span class="token punctuation">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> sum <span class="token operator">=</span> exports<span class="token punctuation">.</span><span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token function">sum</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> a <span class="token operator">+</span> b<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//# sourceMappingURL=...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment" spellcheck="true">// spec.js</span>
<span class="token punctuation">(</span><span class="token punctuation">{</span>
    <span class="token string">"Object.&lt;anonymous>"</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span>module<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> require<span class="token punctuation">,</span> __dirname<span class="token punctuation">,</span> __filename<span class="token punctuation">,</span> global<span class="token punctuation">,</span> jest<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token string">'use strict'</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> _index <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./index'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">var</span> _index2 <span class="token operator">=</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span>_index<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">function</span> <span class="token function">_interopRequireDefault</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> obj <span class="token operator">&amp;&amp;</span> obj<span class="token punctuation">.</span>__esModule <span class="token operator">?</span> obj <span class="token punctuation">:</span> <span class="token punctuation">{</span>
                <span class="token keyword">default</span><span class="token punctuation">:</span> obj
            <span class="token punctuation">}</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'sum'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'correctly adds 1 and 1'</span><span class="token punctuation">,</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">debugger</span> <span class="token punctuation">;</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span>
                _index2<span class="token punctuation">.</span><span class="token keyword">default</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toEqual</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment" spellcheck="true">//# sourceMappingURL=...</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
      </div>
<p>Without getting too much into the details of babel's output, we can get a feeling for how this code works:</p>
<ol>
<li>In <code>index.js</code>, Babel passes in an <code>exports</code> object, sets <code>exports.__esModule</code> to true, and sets <code>exports.sum</code> to our sum function.</li>
<li>In <code>spec.js</code>, Babel uses a <code>require</code> method to get the value of the <code>index.js</code> module, which we can assume to be the <code>exports</code> object in <code>index.js</code>.</li>
<li>The code sees that the imported object's <code>__esModule</code> property is true, so it sets <code>_index2.default</code> to the default export.</li>
<li>The <code>sum</code> invocation in our original code is replaced with <code>(0, _index2.default)</code>, which evaluates to <code>_index2.default</code>. (The reasons for this specific syntax are beyond the scope of this blog post.)</li>
</ol>
<p>Seems like we're getting somewhere! If <code>index.js</code> sets <code>exports.sum</code> to our sum function, then we would expect <code>spec.js</code> to use it like <code>_index2.sum</code>. Instead, it tries to use <code>_index2.default</code>, which explains our original error...</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>FAIL  ./spec.js
 sum
   ✕ correctly adds 1 and 1 (4ms)

 ● sum › correctly adds 1 and 1

   TypeError: (0 , _index2.default) is not a function</code></pre>
      </div>
<p><code>_index2.default</code> isn't a function because it's undefined, as we saw when we looked in the <code>_index2</code> object in the Debugger Scope. But how can we fix our original code? We seem to be accessing the <code>sum</code> function in the wrong way, so let's check out how we're importing and exporting the function:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">sum</span> <span class="token operator">=</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// spec.js</span>
<span class="token keyword">import</span> sum <span class="token keyword">from</span> <span class="token string">'./index'</span>
</code></pre>
      </div>
<p>Ah-ha! We're exporting <code>sum</code> as a named variable and importing it as the default. To fix this error, we can either change the named export into a default export or change the default import into a named import. Let's do the former:</p>
<div class="gatsby-highlight">
      <pre class="language-javascript"><code><span class="token comment" spellcheck="true">// index.js</span>
<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>

<span class="token comment" spellcheck="true">// spec.js</span>
<span class="token keyword">import</span> sum <span class="token keyword">from</span> <span class="token string">'./index'</span>
</code></pre>
      </div>
<p>Now we run <code>npm t</code> once again, and we get...</p>
<div class="gatsby-highlight">
      <pre class="language-none"><code>PASS  ./spec.js
 sum
   ✓ correctly adds 1 and 1 (5ms)

Test Suites: 1 passed, 1 total
Tests:       1 passed, 1 total
Snapshots:   0 total
Time:        1.602s
Ran all test suites.</code></pre>
      </div>
<p>Passing Tests = <em>Pure Bliss</em> :)</p>
<p>And now we can feel extra happy, because we debugged the error, we understand where it's coming from, and we'll be unfazed if we see it again.</p>
<p>The takeaway from this round of debugging is: do your best to <em>deeply</em> understand the errors you encounter. If you think you understand an error, but you're not sure, it can help to write down any questions that are floating around your head. Then you can methodically tackle each question and improve your debugging skills. This is a strategy that I'm learning myself, and I hope it proves useful to you.</p></main></article><footer class="sc-ckVGcZ ftCPeV" data-reactid="21"><p data-reactid="22"><!-- react-text: 23 -->Hi! I&#x27;m Nathan. I&#x27;d love to <!-- /react-text --><a target="_blank" href="mailto:nathanwshane@gmail.com" data-reactid="24">hear from you</a><!-- react-text: 25 -->, whether you have a question, a comment, or just want to say hi. :)<!-- /react-text --></p><p data-reactid="26"><i class="sc-jKJlTe hvyBjO" data-reactid="27"></i><span data-reactid="28"><!-- react-text: 29 --> I started this blog at the <!-- /react-text --><a target="_blank" href="https://www.recurse.com/scout/click?t=588dda8f4f69c79a63576ddde074a24f" data-reactid="30">Recurse Center</a><!-- react-text: 31 -->, a wonderful community of programmers that will help you become a better programmer. <!-- /react-text --></span><i class="sc-jKJlTe hvyBjO" data-reactid="32"></i></p><p data-reactid="33">© Nathan Shane</p></footer></div></div></div></div><script>
  
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-66298356-2', 'auto');
  </script></body></html>